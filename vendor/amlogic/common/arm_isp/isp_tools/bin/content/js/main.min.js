
//----------------------------------------------------------------------------
// The confidential and proprietary information contained in this file may
// only be used by a person authorised under and to the extent permitted
// by a subsisting licensing agreement from ARM Limited or its affiliates.
//
//          (C) COPYRIGHT 2018 ARM Limited or its affiliates.
//                        ALL RIGHTS RESERVED
//
// This entire notice must be reproduced on all copies of this file
// and copies of this file may only be made by a person if such person is
// permitted to do so under the terms of a subsisting license agreementv
// from ARM Limited or its affiliates.
//----------------------------------------------------------------------------

!function t(e,n,r){function a(o,s){if(!n[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(i)return i(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[o]={exports:{}};e[o][0].call(u.exports,function(t){var n=e[o][1][t];return a(n||t)},u,u.exports,t,e,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(t,e,n){var r=t("../utils/helper");e.exports={createButtons:function(t){var e=r("#buttons-template").content;t.querySelector(".buttons-container").appendChild(e.cloneNode(!0))}}},{"../utils/helper":38}],2:[function(t,e,n){function r(){var t=f.loadStarredRegisters();t.forEach(function(t){var e=m.$('.star-button[fav-name="'+t+'"]');Array.prototype.slice.call(e).forEach(c)}),t.length>0&&m("#toggle-fav-button").classList.remove("disabled")}function a(){for(var t,e,n,r=f.loadStarredPages(),a=0,i=r.length;a<i;a++)t=r[a].name,e=r[a].type,(n=m('.section[section="'+t+'"][type='+e+"]"))&&(n.querySelector(".like-page").classList.add("star-selected"),d(t,e))}function i(){for(var t=m.$(".star-button.star-selected[fav-name]"),e=new Set,n=0,r=t.length;n<r;n++)e.add(t[n].getAttribute("fav-name"));f.saveStarredRegisters(Array.from(e))}function o(){for(var t=m.$(".section-link.fav-menu-item[fav-name][type]"),e=[],n=0,r=t.length;n<r;n++)e.push({name:t[n].getAttribute("fav-name"),type:t[n].getAttribute("type")});f.saveStarredPages(e)}function s(){h.hideMenusAndTabs(),Array.prototype.slice.call(m.$(".container")).forEach(function(t){t.querySelector(".star-button.star-selected")?(t.classList.remove("hidden"),Array.prototype.slice.call(t.querySelectorAll(".section")).forEach(function(t){if(t.querySelector(".star-button.star-selected")){t.classList.remove("hidden"),t.classList.add("in-common"),t.querySelector(".page-sub-menu-left-buttons").classList.add("hidden"),t.querySelector(".page-sub-menu-right-buttons").classList.add("hidden"),t.querySelector(".favourites-page-buttons").classList.remove("hidden");var e=t.querySelectorAll(".control-item");Array.prototype.slice.call(e).forEach(function(t){t.querySelector(".star-button.star-selected")?t.classList.remove("hidden"):t.classList.add("hidden")})}else t.classList.add("hidden")})):t.classList.add("hidden")}),document.dispatchEvent(new Event("act-reload-visible"))}function l(t){u(t),setTimeout(function(){var e=t.closest(".control-item");e.classList.add("hidden");var n=e.closest(".section");n.querySelector(".star-button.star-selected")||(n.classList.add("hidden"),n.querySelector(".page-sub-menu-left-buttons").classList.remove("hidden"),n.querySelector(".page-sub-menu-right-buttons").classList.remove("hidden"),n.querySelector(".favourites-page-buttons").classList.add("hidden"),m(".star-button.star-selected")||(m("#toggle-fav-button").classList.add("disabled"),setTimeout(v.returnToPreviouslySelectedTab,200)))},300)}function c(t){t.classList.add("star-selected")}function u(t){t.classList.remove("star-selected")}function d(t,e){var n=m('.fav-menu[type="'+e+'"]'),r=m("#fav-menu-item-template").content,a=r.querySelector(".section-link");a.setAttribute("fav-name",t),a.setAttribute("type",e),a.setAttribute("title",t),e.contains("calibrations")?a.querySelector("p").innerHTML=t.replace(/^CALIBRATION_/,""):a.querySelector("p").innerHTML=t;var i=n.querySelector(".menu-delimiter");n.insertBefore(r.cloneNode(!0),i),n.children.length>1&&(i.classList.contains("hidden")&&i.classList.remove("hidden"),n.classList.contains("hidden")&&n.classList.remove("hidden"))}function p(t,e){var n=m('.fav-menu[type="'+e+'"]'),r=n.querySelector('.section-link[fav-name="'+t+'"][type="'+e+'"]');r&&(n.removeChild(r),1===n.children.length&&(n.querySelector(".menu-delimiter").classList.add("hidden"),n.classList.add("hidden")));var a=m('.section[section="'+t+'"][type="'+e+'"]');a&&a.querySelector(".like-page").classList.remove("star-selected")}var m=t("../utils/helper"),f=t("../common/state"),v=t("../common/tabs"),h=t("../common/menu"),g=function(){return null===m("#toggle-fav-button.star-selected")};e.exports={loaded:function(){return window.addEventListener("beforeunload",function(){f.mayBeforeUnload()&&(i(),o())}),document.addEventListener("click",function(t){if(0===t.button){var e,n,r,a,i=t.target,o=i.classList.contains("star-selected"),f=g();if(i.classList.contains("star-button"))f?l(i):(t.shiftKey?Array.prototype.slice.call(m.$(".container:not(.hidden)")).forEach(function(t){Array.prototype.slice.call(t.querySelectorAll(".section:not(.hidden)")).forEach(function(t){var e=t.querySelectorAll(".star-button");o?Array.prototype.slice.call(e).forEach(u):Array.prototype.slice.call(e).forEach(c)})}):o?u(i):c(i),m(".star-button.star-selected")?m("#toggle-fav-button").classList.remove("disabled"):m("#toggle-fav-button").classList.add("disabled"));else if("toggle-fav-button"===i.id)f?(i.classList.add("star-selected"),setTimeout(v.returnToPreviouslySelectedTab,50)):(i.classList.remove("star-selected"),s(),document.dispatchEvent(new Event("act-hide-reg-search")));else if(i.classList.contains("like-page"))i.classList.toggle("star-selected"),r=(n=i.closest(".section")).getAttribute("section"),a=n.getAttribute("type"),o?p(r,a):d(r,a);else if(i.classList.contains("fav-menu-item")||i.classList.contains("fav-menu-anchor")){var h=i.closest(".fav-menu-item");a=i.closest(".fav-menu").getAttribute("type"),e={detail:{name:h.getAttribute("fav-name"),type:a}},document.dispatchEvent(new CustomEvent("act-select-section",e))}else if(i.classList.contains("fav-menu-toggle")){var b=i.closest(".fav-menu-item");p(b.getAttribute("fav-name"),b.getAttribute("type"))}}}),document.addEventListener("act-clear-user-data",function(){var t=m.$(".star-button.star-selected");Array.prototype.slice.call(t).forEach(u),m("#toggle-fav-button").classList.add("disabled");var e=m.$(".like-page.star-selected");Array.prototype.slice.call(e).forEach(function(t){t.classList.remove("star-selected");var e=t.closest(".section");p(e.getAttribute("section"),e.getAttribute("type"))})}),document.addEventListener("click",function(t){if(0===t.button){var e=t.target;if(e&&(e.classList.contains("select-all")||e.classList.contains("deselect-all")||e.classList.contains("favourites-deselect-all"))){var n,r,a;if(e.classList.contains("select-all"))for(r=(n=e.closest(".section")).querySelectorAll(".star-button"),a=0;a<r.length;a++)c(r[a]);if(e.classList.contains("deselect-all"))for(r=(n=e.closest(".section")).querySelectorAll(".star-button"),a=0;a<r.length;a++)u(r[a]);if(e.classList.contains("favourites-deselect-all")){var i=(n=e.closest(".section")).querySelectorAll(".control-item:not(.hidden)");for(a=0;a<i.length;a++){var o=i[a].querySelector(".star-button");u(o),l(o)}}m(".star-button.star-selected")?m("#toggle-fav-button").classList.remove("disabled"):m("#toggle-fav-button").classList.add("disabled")}}}),r(),a(),Promise.resolve()}}},{"../common/menu":6,"../common/state":10,"../common/tabs":11,"../utils/helper":38}],3:[function(t,e,n){function r(){return"undefined"!=typeof Promise&&Promise.defer?Promise.defer():"undefined"!=typeof PromiseUtils&&PromiseUtils.defer?PromiseUtils.defer():(this.resolve=null,this.reject=null,this.promise=new Promise(function(t,e){this.resolve=t,this.reject=e}.bind(this)),void Object.freeze(this))}var a={deferAction:function(t,e){var n=new r;return document.dispatchEvent(new CustomEvent(t,{detail:{data:e,deferred:n}})),n.promise},handleAction:function(t,e){document.addEventListener(t,function(t){e(t.detail.data,t.detail.deferred)})}},i={dark1:"white",dark2:"white",dark3:"#009F93",light1:"#C3C3C3",light2:"black"};a.handleAction("chart:create-chart",function(t,e){var n={constraints:"auto",minX:null,maxX:null,minY:null,maxY:null,background:i.dark1},r=t.options;r.xAxis=r.xAxis||{},r.yAxis=r.yAxis||{};var o=document.getElementById(t.id);o.classList.add("chart"),o.style.background=r.background||n.background,o.style.position="relative",o.style["min-width"]=0;var s={top:.1,right:.1,bottom:.1,left:.1},l=document.createElement("canvas");l.style.display="none",o.appendChild(l);var c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttributeNS(null,"width",o.offsetWidth),c.setAttributeNS(null,"height",o.offsetHeight),c.setAttributeNS(null,"preserveAspectRatio","none"),o.appendChild(c);var u=document.createElementNS("http://www.w3.org/2000/svg","svg");u.setAttributeNS(null,"width",o.offsetWidth),u.setAttributeNS(null,"height",o.offsetHeight),u.style.position="absolute",u.style.top=0,u.style.right=0,u.style.bottom=0,u.style.left=0,o.appendChild(u);var d=document.createElementNS("http://www.w3.org/2000/svg","g");u.appendChild(d);var p=document.createElementNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"transform","scale(1, -1)"),c.appendChild(p);var m=document.createElementNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","scale(1, -1)"),c.appendChild(m);var f=function(){a.deferAction("chart:redraw",{chart:h})},v=function(t){var e=t.detail,n=h.plots[e.plotIndex].type;e.chart=h,e.forceRedraw=!0,a.deferAction(n+":update",e)};o.addEventListener("update-plot-data",v),document.addEventListener("redraw",f),o.addEventListener("remove-chart",function(){for(document.removeEventListener("redraw",f),o.removeEventListener("update-plot-data",v),o.classList.remove("chart");o.firstChild;)o.removeChild(o.firstChild)});var h={element:o,minX:r.minX||n.minX,maxX:r.maxX||n.maxX,minY:r.minY||n.minY,maxY:r.maxY||n.maxY,margin:s,axes:void 0===r.axes||r.axes,units:1,svg:c,canvas:l,textSVG:u,draw:p,drawText:d,drawAxis:m,line:function(t,e){if(h.heatmapMode)throw"Cannot add line to chart with heatmap";return a.deferAction("line:add",{chart:h,plotData:t,options:e}).catch(function(){})},scatter:function(t,e){if(h.heatmapMode)throw"Cannot add scatter to chart with heatmap";return a.deferAction("scatter:add",{chart:h,plotData:t,options:e}).catch(function(){})},heatmap:function(t,e){return a.deferAction("heatmap:add",{chart:h,plotData:t,options:e}).catch(function(){})},_drawAxes:function(){return a.deferAction("axes:draw",{chart:h})},clear:function(){return a.deferAction("chart:clear",{chart:h})},plots:[]};e.resolve(h)}),a.handleAction("chart:redraw",function(t,e){var n=t.chart;n.clear().then(function(){var t=n.element.offsetWidth,e=n.element.offsetHeight;n.textSVG.setAttributeNS(null,"width",t),n.textSVG.setAttributeNS(null,"height",e),n.svg.setAttributeNS(null,"width",t),n.svg.setAttributeNS(null,"height",e),n.canvas.setAttribute("width",n.maxX-n.minX),n.canvas.setAttribute("height",n.maxY-n.minY);var r=n.drawingMinX+", "+-n.drawingMaxY/n.units+", "+(n.drawingMaxX-n.drawingMinX)+", "+(n.drawingMaxY-n.drawingMinY)/n.units;n.svg.setAttribute("viewBox",r);for(var i=0;i<n.plots.length;i++)"line"===n.plots[i].type&&a.deferAction("line:plot",{chart:n,plotData:n.plots[i].data,options:n.plots[i].options}),"scatter"===n.plots[i].type&&a.deferAction("scatter:plot",{chart:n,plotData:n.plots[i].data,options:n.plots[i].options}),"heatmap"===n.plots[i].type&&a.deferAction("heatmap:plot",{chart:n,plotData:n.plots[i].data,options:n.plots[i].options});return n.axes?n._drawAxes():Promise.resolve()}).then(function(){e.resolve(n)}).catch(function(){})}),a.handleAction("chart:clear",function(t,e){var n=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)};n(t.chart.drawAxis),n(t.chart.drawText),n(t.chart.draw),e.resolve(t.chart)}),a.handleAction("limits:calculate",function(t,e){var n=t.chart,r=t.plotData,a=t.plotType;if(r.length>n.element.offsetWidth/4){for(var i=Math.floor(r.length/(n.element.offsetWidth/4)),o=[],s=0;s<r.length;s+=i)o.push(r[s]);r=o}var l,c,u,d;if("line"===a)l=0,c=r.length-1,u=Math.min.apply(null,r),d=Math.max.apply(null,r);else if("scatter"===a){var p=r.map(function(t){return t[0]});l=Math.min.apply(null,p),c=Math.max.apply(null,p),p=r.map(function(t){return t[1]}),d=Math.max.apply(null,p),u=Math.min.apply(null,p)}u===d&&(d+=10);var m=c-l,f=d-u;f>1e9&&(n.units=1e5);var v=l-m*n.margin.left,h=u-f*n.margin.bottom,g=c+m*n.margin.right,b=d+f*n.margin.top;(null===n.minX||u<n.minY)&&(n.minX=l,n.drawingMinX=v),(null===n.maxX||c>n.maxX)&&(n.maxX=c,n.drawingMaxX=g),(null===n.minY||u<n.minY)&&(n.minY=u,n.drawingMinY=h),(null===n.maxY||d>n.maxY)&&(n.maxY=d,n.drawingMaxY=b),e.resolve(n)}),a.handleAction("line:update",function(t,e){var n=t.chart,r=t.plotData,i=t.plotIndex;if(r.length>n.element.offsetWidth/4){for(var o=Math.floor(r.length/(n.element.offsetWidth/4)),s=[],l=0;l<r.length;l+=o)s.push(r[l]);r=s}a.deferAction("limits:calculate",{chart:n,plotData:r,plotType:"line"}).then(function(t){return i<0?t.plots.push({type:"line",data:r}):t.plots[i]={type:"line",data:r},a.deferAction("chart:redraw",{chart:t})}).then(function(){e.resolve(n)}).catch(function(){})}),a.handleAction("line:add",function(t,e){t.plotIndex=-1,a.deferAction("line:update",t).then(function(t){e.resolve(t)})}),a.handleAction("line:plot",function(t,e){var n,r=t.chart,a=t.plotData,o="";for(n=0;n<a.length;n++)"number"==typeof a[n]?o+=n+","+a[n]+" ":e.reject("Incorrect data format");var s=document.createElementNS("http://www.w3.org/2000/svg","polyline");s.setAttributeNS(null,"points",o),s.setAttributeNS(null,"stroke-width",2),s.setAttributeNS(null,"stroke",i.light2),s.setAttributeNS(null,"fill","none"),s.setAttributeNS(null,"opacity",.7),s.setAttributeNS(null,"vector-effect","non-scaling-stroke"),r.draw.appendChild(s)}),a.handleAction("scatter:update",function(t,e){var n=t.chart,r=t.plotData,i=t.plotIndex;if(r.length>n.element.offsetWidth/4){for(var o=Math.floor(r.length/(n.element.offsetWidth/4)),s=[],l=0;l<r.length;l+=o)s.push(r[l]);r=s}i<0?t.chart.plots.push({type:"scatter",data:r}):t.chart.plots[i]={type:"scatter",data:r},a.deferAction("limits:calculate",{chart:n,plotData:r,plotType:"scatter"}).then(function(t){a.deferAction("chart:redraw",{chart:t}),e.resolve(t)}).catch(function(){})}),a.handleAction("scatter:add",function(t,e){t.plotIndex=-1,a.deferAction("scatter:update",t).then(function(t){e.resolve(t)})}),a.handleAction("scatter:plot",function(t){for(var e=t.chart,n=t.plotData,r="",a=0;a<n.length;a++)r+=n[a][0]+","+n[a][1]/e.units+" ";var o=document.createElementNS("http://www.w3.org/2000/svg","polyline");o.setAttributeNS(null,"points",r),o.setAttributeNS(null,"stroke-width",2),o.setAttributeNS(null,"stroke",i.light2),o.setAttributeNS(null,"fill","none"),o.setAttributeNS(null,"opacity",.7),o.setAttributeNS(null,"vector-effect","non-scaling-stroke"),e.draw.appendChild(o)}),a.handleAction("heatmap:update",function(t,e){var n=t.chart;n.heatmapMode=!0;for(var r,i,o,s,l,c=t.plotData,u=t.plotIndex,d=c.length,p=c[0].length,m=0;m<c.length;m++)o=c[m],s=Math.min.apply(null,o),l=Math.max.apply(null,o),(void 0===r||s<r)&&(r=s),(void 0===i||l>i)&&(i=l);n.margin.right=.3,n.minX=0,n.minY=0,n.minZ=r,n.maxX=p,n.maxY=d,n.maxZ=i,n.drawingMinX=0-(p-0)*n.margin.left,n.drawingMaxX=p+(p-0)*n.margin.right,n.drawingMinY=0-(d-0)*n.margin.bottom,n.drawingMaxY=d+(d-0)*n.margin.top,n.canvas.setAttribute("width",p-0),n.canvas.setAttribute("height",d-0);var f=URL.createObjectURL(new Blob(["(",function(){onmessage=function(t){var e,n=function(t,e,n,r,a){return{r:Math.floor((a.r-r.r)*(t-e)/(n-e))+r.r,g:Math.floor((a.g-r.g)*(t-e)/(n-e))+r.g,b:Math.floor((a.b-r.b)*(t-e)/(n-e))+r.b}},r=t.data.heatmapData,a=t.data.colours,i=t.data.bands,o=new Uint8ClampedArray(r.length*r[0].length*4),s=0;for(m=0;m<r.length;m++)for(var l=0;l<r[m].length;l++){e=r[m][l];var c;i[0]<=e&&e<=i[1]?c=n(e,i[0],i[1],a[0],a[1]):i[1]<e&&e<=i[2]?c=n(e,i[1],i[2],a[1],a[2]):i[2]<e&&e<=i[3]?c=n(e,i[2],i[3],a[2],a[3]):i[3]<e&&e<=i[4]&&(c=n(e,i[3],i[4],a[3],a[4])),o[s]=c.r,o[s+1]=c.g,o[s+2]=c.b,o[s+3]=255,s+=4}postMessage(o.buffer,[o.buffer])}}.toString(),")()"],{type:"application/javascript"}));n.heatmapWorker=new Worker(f),u<0?t.chart.plots.push({type:"heatmap",data:c}):t.chart.plots[u]={type:"heatmap",data:c},a.deferAction("chart:redraw",{chart:n}),e.resolve(n)}),a.handleAction("heatmap:add",function(t,e){t.plotIndex=-1,a.deferAction("heatmap:update",t).then(function(t){e.resolve(t)})}),a.handleAction("heatmap:plot",function(t,e){var n,r=function(t,e){var n=Math.pow(10,e||0);return Math.round(t*n)/n},a=t.chart,i=t.plotData,o=a.minZ,s=a.maxZ,l=document.createElementNS("http://www.w3.org/2000/svg","defs"),c=[{r:255,g:0,b:0},{r:255,g:255,b:0},{r:0,g:255,b:0},{r:0,g:255,b:255},{r:0,g:0,b:255}],u=[],d=(s-o)/4;for(n=o;n<=s;n+=d)u.push(n);var p=document.createElementNS("http://www.w3.org/2000/svg","linearGradient");p.setAttributeNS(null,"id","legendGradient"),p.setAttributeNS(null,"gradientTransform","rotate(90)");var m,f=(a.maxX-a.minX)/20,v=(a.maxY-a.minY)/3,h=a.maxX+(a.maxX-a.minX)/20,g=a.maxY/2;for(n=0;n<4;n++)(m=document.createElementNS("http://www.w3.org/2000/svg","stop")).setAttribute("offset",25*n+"%"),m.setAttribute("stop-color","rgb("+c[n].r+","+c[n].g+","+c[n].b+")"),p.appendChild(m),(m=document.createElementNS("http://www.w3.org/2000/svg","stop")).setAttribute("offset",25*(n+1)+"%"),m.setAttribute("stop-color","rgb("+c[n+1].r+","+c[n+1].g+","+c[n+1].b+")"),p.appendChild(m);for(l.appendChild(p),a.svg.appendChild(l),n=0;n<u.length;n++){var b=function(t,e,n){var a=t.svg.getAttribute("viewBox").split(", "),i=r(a[2],2),o=r(a[3],2),s=t.element.offsetWidth/i,l=t.element.offsetHeight/o;return{x:0-t.minX*s+e*s,y:t.element.offsetHeight-n*l}}(a,h+3.8*f,v/4*n+g+v/4+a.margin.top/2),y=document.createElementNS("http://www.w3.org/2000/svg","text");y.setAttributeNS(null,"text-anchor","middle"),y.setAttributeNS(null,"x",b.x),y.setAttributeNS(null,"y",b.y),y.setAttributeNS(null,"font-size",12),y.setAttributeNS(null,"fill","black");var A=document.createTextNode(function(t){return t/1e6>=1?r(t/1e6,1)+"M":t/1e4>=1?r(t/1e3,1)+"K":r(t,1).toString()}(u[n]));y.appendChild(A),a.drawText.appendChild(y)}var w=document.createElementNS("http://www.w3.org/2000/svg","rect");w.setAttributeNS(null,"width",(a.maxX-a.minX)/20),w.setAttributeNS(null,"height",(a.maxY-a.minY)/3),w.setAttributeNS(null,"x",a.maxX+(a.maxX-a.minX)/20),w.setAttributeNS(null,"y",a.maxY/2),w.setAttributeNS(null,"fill","url(#legendGradient)"),a.draw.appendChild(w),a.heatmapWorker.onmessage=function(t){var e=a.canvas.getContext("2d"),n=e.createImageData(i.length,i[0].length);n.data.set(new Uint8ClampedArray(t.data)),e.putImageData(n,0,0);var r=a.canvas.toDataURL(),o=document.createElementNS("http://www.w3.org/2000/svg","image");o.setAttributeNS(null,"height",a.maxX-a.minX),o.setAttributeNS(null,"width",a.maxY-a.minY),o.setAttributeNS("http://www.w3.org/1999/xlink","href",r),o.setAttributeNS(null,"x",a.minX),o.setAttributeNS(null,"y",a.minY),o.setAttributeNS(null,"visibility","visible"),a.draw.appendChild(o)},a.heatmapWorker.postMessage({heatmapData:i,bands:u,colours:c}),e.resolve()}),a.handleAction("axes:draw",function(t){var e,n=function(t,e){var n=Math.pow(10,e||0);return Math.round(t*n)/n},r=function(t,e,r){var a=t.svg.getAttribute("viewBox").split(", "),i=n(a[2],2),o=n(a[3],2),s=t.element.offsetWidth/i,l=t.element.offsetHeight/o;return{x:0-t.minX*s+e*s,y:t.element.offsetHeight-r*l}},a=function(t){return t/1e6>=1?n(t/1e6,1)+"M":t/1e4>=1?n(t/1e3,1)+"K":n(t,1).toString()},o=t.chart,s=o.minX,l=o.maxX,c=o.minY/o.units,u=o.maxY/o.units,d=function(t,e,n,r,a,i){var o=document.createElementNS("http://www.w3.org/2000/svg","polyline");return o.setAttributeNS(null,"points",t+","+e+" "+n+","+r),o.setAttributeNS(null,"stroke-width",i),o.setAttributeNS(null,"stroke",a),o.setAttributeNS(null,"vector-effect","non-scaling-stroke"),o.setAttributeNS(null,"shape-rendering","crispEdges"),o},p=d(s,c,l,c,i.light1,2);o.drawAxis.appendChild(p);var m,f=Math.min(o.maxX-o.minX,10),v=n((o.maxX-o.minX)/f,0);for(e=o.minX;e<=o.maxX;e+=v)m=d(e,c-.01*(u-c),e,u,i.light1,1),o.drawAxis.appendChild(m),function(t,e,n,i,o,s){var l=(i-e)*s.margin.left,c=r(s,t+l,s.margin.bottom*(o-n)/2),u=document.createElementNS("http://www.w3.org/2000/svg","text");u.setAttributeNS(null,"text-anchor","middle"),u.setAttributeNS(null,"x",c.x),u.setAttributeNS(null,"y",c.y),u.setAttributeNS(null,"font-size",12),u.setAttributeNS(null,"fill","black");var d=document.createTextNode(a(t));u.appendChild(d),s.drawText.appendChild(u)}(e,s,c,l,u,o);var h=d(s,c-.01*(u-c),s,u,i.light1,2);o.drawAxis.appendChild(h);var g,b=Math.min(o.maxY-o.minY,10),y=n((o.maxY-o.minY)/b,0);for(e=o.minY;e<=o.maxY;e+=y){var A=e/o.units;g=d(s-.004*(l-s),A,l,A,i.light1,1),o.drawAxis.appendChild(g),function(t,e,n,i,o,s){var l=(i-e)*s.margin.left,c=(o-n)*s.margin.top,u=r(s,e+l/4*3,t+c-n),d=document.createElementNS("http://www.w3.org/2000/svg","text");d.setAttributeNS(null,"text-anchor","end"),d.setAttributeNS(null,"x",u.x),d.setAttributeNS(null,"y",u.y+3),d.setAttributeNS(null,"font-size",12),d.setAttributeNS(null,"fill","black");var p=document.createTextNode(a(t));d.appendChild(p),s.drawText.appendChild(d)}(A,s,c,l,u,o)}if(o.units>1){var w=(l-s)*o.margin.left,S=(u-c)*o.margin.top,L=r(o,s+1.1*w,u+S),E=document.createElementNS("http://www.w3.org/2000/svg","text");E.setAttributeNS(null,"text-anchor","start"),E.setAttributeNS(null,"x",L.x),E.setAttributeNS(null,"y",L.y+3),E.setAttributeNS(null,"font-size",10),E.setAttributeNS(null,"fill","black");var x=document.createTextNode("x"+o.units);E.appendChild(x),o.drawText.appendChild(E)}});window.onresize=function(){document.dispatchEvent(new CustomEvent("redraw"))},e.exports=function(t,e){return a.deferAction("chart:create-chart",{id:t,options:e})}},{}],4:[function(t,e,n){function r(t){setTimeout(function(){t.querySelector(".polling")&&(t.querySelector(".chart")&&o(t),r(t))},500)}function a(t){var e=t.getAttribute("command");t.querySelector(".graph-container").id=e,s(e,{}).then(function(e){var n=p(t),r=i(t,n);return n===l.LINE||n===l.COORDINATES?e.scatter(r):n===l.HEATMAP?e.heatmap(r):void 0})}function i(t,e){var n,r,a,i=t.querySelectorAll(".array-cell");if(a=[],e===l.LINE)for(n=0;n<i.length;n++)a.push([n,parseInt(i[n].innerHTML)]);else if(e===l.COORDINATES)for(n=0;n<i.length;n+=2)a.push([parseInt(i[n].innerHTML),parseInt(i[n+1].innerHTML)]);else if(e===l.HEATMAP){var o,s=t.querySelector(".mxn-hint").innerHTML.split("x"),c=parseInt(s[0]),u=parseInt(s[1]),d=0;for(n=0;n<u;n++){for(o=[],r=0;r<c;r++)o.push(parseInt(i[d].innerHTML)),d++;a.push(o)}}return a}function o(t){var e=t.querySelector(".chart");if(e){var n={detail:{plotData:i(t,p(t)),plotIndex:0}};e.dispatchEvent(new CustomEvent("update-plot-data",n)),document.dispatchEvent(new CustomEvent("redraw",{detail:{id:t.getAttribute("command")}}))}}var s=t("./gochart.js"),l={LINE:"line",SINGLE_VALUE:"singleValue",COORDINATES:"coordinates",HEATMAP:"heatmap"},c=function(t){return t.classList.contains("selected")},u=function(t){t.querySelector(".graph-container").classList.remove("hidden");var e=t.getAttribute("data-type");"byte"===e||"uint"===e?(t.querySelector('input[type="text"]').classList.add("hidden"),t.querySelector('input[type="range"]').classList.add("hidden"),t.querySelector(".radix-button").classList.add("hidden")):t.querySelector(".array-table").classList.add("hidden")},d=function(t){var e=t.querySelector(".graph-container");e.classList.add("hidden");var n=t.getAttribute("data-type");"byte"===n||"uint"===n?(t.querySelector('input[type="text"]').classList.remove("hidden"),t.querySelector('input[type="range"]').classList.remove("hidden"),t.querySelector(".radix-button").classList.remove("hidden")):t.querySelector(".array-table").classList.remove("hidden"),e.dispatchEvent(new CustomEvent("remove-chart"))},p=function(t){var e=t.getAttribute("data-type");if("byte"===e||"uint"===e)return l.SINGLE_VALUE;var n=t.querySelector(".mxn-hint").innerHTML.split("x"),r=parseInt(n[0]),a=parseInt(n[1]);return 1===a||1===r?l.LINE:2===a||2===r?l.COORDINATES:l.HEATMAP};e.exports={loaded:function(){document.addEventListener("dblclick",function(t){t.target.classList.contains("reload-button")&&r(t.target.closest(".control-item"))}),document.addEventListener("click",function(t){if(0===t.button){var e,n,r=t.target;if(r.classList.contains("graph-button")){e=r.closest(".control-item");p(e);c(n=r)?(n.classList.remove("selected"),d(e)):(n.classList.add("selected"),a(e),u(e))}else if(r.classList.contains("reload-button"))e=r.closest(".control-item"),setTimeout(function(){o(e)},100);else if(r.classList.contains("section-link")||r.classList.contains("tab-label")||r.classList.contains("main-search-holder")||"toggle-fav-button"===r.id)for(var i=document.querySelectorAll(".chart"),s=0;s<i.length;s++)(e=i[s].closest(".control-item")).querySelector(".graph-button").classList.remove("selected"),d(e)}})}}},{"./gochart.js":3}],5:[function(t,e,n){var r=t("../utils/helper"),a=0;e.exports={loaded:function(){return document.addEventListener("act-error",function(t){var e=t.detail,n=r("#srv-status");n.classList.remove("srv-status-ok"),n.classList.add("srv-status-fail"),n.innerHTML=e.text;var i=r(".error-list"),o=r("#error-list-item-template").content,s=new Date;o.querySelector(".error-timestamp").innerHTML=s.toLocaleTimeString("en-GB")+"."+("000"+s.getMilliseconds()).slice(-3)+": ",o.querySelector(".error-message-content").innerHTML=e.text,i.insertBefore(o.cloneNode(!0),i.childNodes[0]);var l=r("#error-count");if(l.classList.contains("hidden")&&l.classList.remove("hidden"),++a>0){var c=r(".dialog-clear-btn.disabled");c&&c.classList.remove("disabled")}a>100&&(i.removeChild(i.childNodes[i.childNodes.length-1]),a--),l.innerHTML=a+" errors"}),document.addEventListener("act-clear-errors",function(){a=0;var t=r("#error-count");t.innerHTML=a+" errors",t.classList.add("hidden")}),document.addEventListener("act-ok",function(){var t=r("#srv-status");t.classList.remove("srv-status-fail"),t.classList.add("srv-status-ok"),t.innerHTML="success"}),Promise.resolve()},ERROR:function(t){var e;e={detail:{text:t}},document.dispatchEvent(new CustomEvent("act-error",e))},FATAL:function(t){var e;e={detail:{text:t}},document.dispatchEvent(new CustomEvent("act-error",e))},OK:function(){document.dispatchEvent(new Event("act-ok"))}}},{"../utils/helper":38}],6:[function(t,e,n){function r(t){t.classList.remove("selected-item")}function a(t){t.classList.add("hidden"),t.classList.remove("in-common")}function i(t){t.classList.remove("hidden")}function o(t){t.classList.add("hidden")}function s(t){t.classList.remove("hidden"),Array.prototype.slice.call(t.querySelectorAll(".section-link")).forEach(i)}var l=t("../utils/helper"),c=t("../common/state"),u=function(){Array.prototype.slice.call(l.$(".selected-item")).forEach(r)},d=function(){Array.prototype.slice.call(l.$(".section:not(.hidden)")).forEach(a)};e.exports={selectMenuItem:function(t,e,n){if(t&&e){var r=l('.section[section="'+t+'"][type="'+e+'"]'),a=l('.section-link[section="'+t+'"][type="'+e+'"]');if(r&&a){u(),d(),c[e].setSelectedSectionName(t),a.classList.add("selected-item"),r.classList.remove("hidden"),r.querySelector(".page-sub-menu").classList.remove("hidden");var o=r.querySelectorAll(".control-item.hidden");Array.prototype.slice.call(o).forEach(i),document.dispatchEvent(new Event("act-reload-visible")),l(".content").scrollTop=0}n||c.navigation.addStep(e,t);var s;s={detail:{name:t,type:e}},document.dispatchEvent(new CustomEvent("act-update-history-nav",s))}},hideMenusAndTabs:function(){Array.prototype.slice.call(l.$(".menu:not(.hidden)")).forEach(o),o(l(".menu-top")),Array.prototype.slice.call(l.$(".tab-radio[name=tabs]")).forEach(function(t){t.checked=!1})},loaded:function(){return document.addEventListener("click",function(t){if(0===t.button){var n=t.target;if(n.classList.contains("section-link")){var r=n.getAttribute("section"),a=n.getAttribute("type");e.exports.selectMenuItem(r,a)}}}),document.addEventListener("act-select-section",function(t){var n=t.detail,r=n.name,a=n.type,i=n.omit;e.exports.selectMenuItem(r,a,i)}),document.addEventListener("act-restore-menu",function(t){i(l(".menu-top")),Array.prototype.slice.call(l.$(".menu")).forEach(o);var e=t.detail.type,n=l.$('.menu[type="'+e+'"]');Array.prototype.slice.call(n).forEach(s)}),document.addEventListener("act-select-last-menu-item",function(t){var n,r=t.detail.type;if(c[r].hasSelectedSection())n=c[r].getSelectedSectionName(),e.exports.selectMenuItem(n,r);else{var a=l(".section-link[type="+r+"]");a&&(n=a.getAttribute("section"),e.exports.selectMenuItem(n,r))}}),Promise.resolve()}}},{"../common/state":10,"../utils/helper":38}],7:[function(t,e,n){function r(t,e){var n,r,a,i={};for(r in t)t.hasOwnProperty(r)&&(a=r,"api"===e&&(a=r.split(":")[1]),n=o('.control-item[command="'+a+'"]'),l.elementIsVisible(n)&&(i[r]=t[r]));return i}function a(){u.hw={},u.api={},u.counter=0,u.visibleCounter=0,u.interval=null}function i(){var t=r(u.hw,"hw"),e=r(u.api,"api");u.visibleCounter=Object.keys(t).length+Object.keys(e).length,s.hwPoll(t).catch(c.ERROR),s.apiPoll(e).catch(c.ERROR),o(".toolbar-text").innerHTML=u.counter?u.counter+": "+u.visibleCounter:""}var o=t("../utils/helper"),s=t("../utils/ajax"),l=t("../common/state"),c=t("../common/handler"),u=function(){};e.exports={loaded:function(){return a(),document.addEventListener("act-polling",function(t){var e,n=t.detail,r=n.control,s=n.type,c=u[s],d=r.getAttribute("command");switch(s){case"hw":e=d;break;case"api":e=r.getAttribute("section")+":"+d;break;default:return}var p;if(e in c)r.querySelector(".reload-button").classList.remove("polling"),delete c[e],u.counter--,u.visibleCounter--,p=o("#stop-polling-button"),o(".toolbar-text").innerHTML=u.counter?u.counter+": "+u.visibleCounter:"",u.counter<=0&&(clearInterval(u.interval),a(),p.classList.add("disabled"),p.classList.remove("polling"),p.innerHTML="");else{switch(r.querySelector(".reload-button").classList.add("polling"),s){case"hw":c[e]={type:r.getAttribute("reg-type"),offset:parseInt(r.getAttribute("offset")),size:parseInt(r.getAttribute("sz"))};break;case"api":c[e]={section:parseInt(r.getAttribute("section")),command:parseInt(d)};break;default:return}u.counter++,u.visibleCounter++,null===u.interval&&(u.interval=setInterval(i,l.getPollingPace()),(p=o("#stop-polling-button")).classList.remove("disabled"),p.classList.add("polling")),o(".toolbar-text").innerHTML=u.counter?u.counter+": "+u.visibleCounter:""}}),document.addEventListener("click",function(t){0===t.button&&"stop-polling-button"===t.target.id&&(clearInterval(u.interval),a(),o("#stop-polling-button").classList.add("disabled"),o(".toolbar-text").innerHTML="",Array.prototype.slice.call(o.$(".polling")).forEach(function(t){t.classList.remove("polling")}))}),document.addEventListener("dblclick",function(t){if(0===t.button){var e,n=t.target;if(n.classList.contains("reload-button")){if(!l.doubleClickPolling())return;var r=n.closest(".control-item"),a=r.getAttribute("type");"hw"!==a&&"api"!==a||((e={}).detail={control:r,type:a},document.dispatchEvent(new CustomEvent("act-polling",e)))}}}),Promise.resolve()}}},{"../common/handler":5,"../common/state":10,"../utils/ajax":35,"../utils/helper":38}],8:[function(t,e,n){function r(t){t.classList.remove("hidden"),o("body").classList.add("frozen")}function a(t){t.classList.add("hidden"),o("body").classList.remove("frozen")}function i(t,e,n){var r=10,a=" ",i=String.prototype.padRight,s=" ";e.querySelector(".array-table").classList.contains("hex")?(t.classList.add("hex"),r=16,a="0",i=String.prototype.padLeft,s="  "):t.classList.remove("hex"),t.setAttribute("command",e.getAttribute("command")),t.setAttribute("type",e.getAttribute("type")),t.setAttribute("max",e.getAttribute("max"));var l=parseInt(e.getAttribute("max")).toString(r).length,c=new Array(l+1).join(a);Array.isArray(n)?t.value=n.reduce(function(t,e,n){return t+((n>0?s:"")+i.apply(e.toString(r),[c]))},""):t.value=Array.prototype.slice.call(e.querySelectorAll(".array-cell")).reduce(function(t,e,n){return t+((n>0?s:"")+i.apply(e.innerHTML.toString(),[c]))},""),"WO"===e.getAttribute("data-mode")?o(".dialog-btn.dialog-reload-btn").classList.add("disabled"):o(".dialog-btn.dialog-reload-btn").classList.remove("disabled")}var o=t("../utils/helper"),s=t("../utils/ajax"),l=t("../utils/calc"),c=t("../common/state"),u=t("../common/handler");e.exports={loaded:function(){return document.addEventListener("click",function(t){if(0===t.button){var e,n,d,p,m,f,v,h,g=t.target;if(g.classList.contains("edit-array-button")){e=o(".popup.array-popup"),d=g.closest(".control-item"),i(n=e.querySelector(".array-spread-sheet"),d),e.querySelector(".popup-info").innerHTML=d.getAttribute("display-text");var b="";d.querySelector(".array-table").classList.contains("hex")?(e.querySelector(".popup-radix").innerHTML="HEX",h=16,b="0x"):(e.querySelector(".popup-radix").innerHTML="DEC",h=10),e.querySelector(".popup-max").innerHTML=b+parseInt(d.getAttribute("max"),10).toString(h),e.querySelector(".popup-bits").innerHTML=d.getAttribute("bits"),e.querySelector(".popup-nodes").innerHTML=d.getAttribute("nodes"),r(e)}else if(g.classList.contains("dialog-apply-btn")){e=o(".popup.array-popup");var y=(n=e.querySelector(".array-spread-sheet")).value.toString().replace(/[\s,;\n]+/g,",");h=parseInt(n.classList.contains("hex")?16:10),p=n.getAttribute("command");var A;switch(m=n.getAttribute("type")){case"hw":d=o('.control-item[command="'+p+'"][type=hw]'),v=parseInt(d.getAttribute("nodes")),f=parseInt(d.getAttribute("max")),A=y.split(",").splice(0,v).map(function(t){var e=parseInt(t,h);return isNaN(e)||e<0||e>f?0:e});var w=parseInt(d.getAttribute("bits")),S=parseInt(d.getAttribute("align"));s.hwWrite(null,d.getAttribute("reg-type"),parseInt(d.getAttribute("offset")),l.arrayToBytes(A,w,S)).then(function(t){var e;e={detail:{command:p,bytes:t}},document.dispatchEvent(new CustomEvent("act-hw-value-changed",e)),i(n,d,l.bytesToArray(t,w,S))}).catch(u.ERROR);break;default:if(m.contains("calibrations")){d=o('.control-item[command="'+p+'"][type="'+m+'"]'),f=parseInt(d.getAttribute("max")),v=parseInt(d.getAttribute("nodes")),A=y.split(",").splice(0,v).map(function(t){var e=parseInt(t,h);return isNaN(e)||e<0||e>f?0:e});var L=8*parseInt(d.getAttribute("sz")),E=parseInt(p),x=l.arrayToBytes(A,L,L);s.fwSaveArray(E,x).then(function(){var t;t={detail:{page:E,bytes:x}},document.dispatchEvent(new CustomEvent("act-calibration-value-changed",t)),i(n,d,l.bytesToArray(x,L,L))}).catch(u.ERROR)}}}else if(g.classList.contains("dialog-reload-btn")){e=o(".popup.array-popup"),m=(n=e.querySelector(".array-spread-sheet")).getAttribute("type"),p=n.getAttribute("command");var R;switch(m){case"hw":d=o('.control-item[command="'+p+'"][type=hw]'),R=parseInt(d.getAttribute("sz")),c.elementIsVisible(d)&&s.hwRead(null,d.getAttribute("reg-type"),parseInt(d.getAttribute("offset")),R).then(function(t){var e;e={detail:{command:p,bytes:t}},document.dispatchEvent(new CustomEvent("act-hw-value-changed",e));var r=parseInt(d.getAttribute("bits")),a=parseInt(d.getAttribute("align"));i(n,d,l.bytesToArray(t,r,a))}).catch(u.ERROR);break;default:if(m.contains("calibrations")){d=o('.control-item[command="'+p+'"][type="'+m+'"]'),f=parseInt(d.getAttribute("max")),v=parseInt(d.getAttribute("nodes")),R=parseInt(d.getAttribute("sz"));var q=parseInt(p);s.fwLoadArray(q,R*v).then(function(t){var e=8*R;i(n,d,l.bytesToArray(t,e,e))}).catch(u.ERROR)}}}else if(g.classList.contains("dialog-clear-btn")){e=o(".popup:not(.hidden)");var N=o(".error-list");N&&(N.innerHTML="",g.classList.add("disabled"),document.dispatchEvent(new Event("act-clear-errors"))),a(e)}else if(g.classList.contains("dialog-close-btn"))a(e=o(".popup:not(.hidden)"));else if(g.classList.contains("dialog-upload-btn")){e=o(".popup.array-popup");var T=document.createElement("input");T.setAttribute("type","file"),T.addEventListener("change",function(t){!function(t){var r=new FileReader;r.onload=function(t){n=e.querySelector(".array-spread-sheet");var r=10,a=" ",i=String.prototype.padRight,o=" ";n.classList.contains("hex")&&(r=16,a="0",i=String.prototype.padLeft,o="  ");var s=parseInt(n.getAttribute("max")),l=t.target.result.toString().replace(/[\s,;\n]+/g,","),c=l.indexOf(",");c=0===c?1:0,l=l.slice(c,l.lastIndexOf(","));try{var d=l.split(","),p=s.toString(r).length,m=new Array(p+1).join(a);n.value=d.reduce(function(t,e,n){var a=parseInt(e,r);return t+((n>0?o:"")+i.apply(isNaN(a)?"0":a.toString(r),[m]))},"")}catch(t){u.ERROR("bad format of text file")}},r.onerror=function(){u.ERROR("something is wrong with your file")},r.readAsText(t)}(t.target.files[0])}),T.click()}}}),document.addEventListener("act-ask-user",function(t){var e=t.detail,n=e.question,i=e.yes,s=e.no;if("string"==typeof n&&"function"==typeof i&&"function"==typeof s){var l=o(".ask-user-popup");l.querySelector(".dialog-message").innerHTML=n;var c=l.querySelector(".dialog-yes-btn"),u=l.querySelector(".dialog-no-btn"),d=function(t){0===t.button&&(a(l),c.removeEventListener("click",d),u.removeEventListener("click",p),i())},p=function(t){0===t.button&&(a(l),c.removeEventListener("click",d),u.removeEventListener("click",p),s())};c.addEventListener("click",d),u.addEventListener("click",p),r(l)}}),document.addEventListener("act-popup-progress",function(t){var e=o(".progress-popup");e.querySelector(".dialog-message").innerHTML=t.detail,r(e)}),document.addEventListener("act-cover-progress",function(){var t=o(".progress-popup"),e=t.querySelector("#modal-progress");e.value=0,e.max=100,t.querySelector(".dialog-message").innerHTML="",a(t),o(".popup-log").innerHTML=""}),document.addEventListener("act-popup-errors",function(){r(o(".errors-popup"))}),document.addEventListener("act-popup-log",function(t){o(".popup-log").innerHTML=t.detail.message}),document.addEventListener("act-popup-settings",function(){var t,e=o(".settings-popup");(t=e.querySelector("#cfg-fancy-json")).checked=c.fancyJSON(),(t=e.querySelector("#cfg-nav-hist-labels")).checked=c.useNavHistLabels(),t.setAttribute("original-value",c.fancyJSON().toString()),(t=e.querySelector("#cfg-polling-pace")).value=c.getPollingPace(),t.setAttribute("original-value",c.getPollingPace().toString()),(t=e.querySelector("#cfg-double-click-polling")).checked=c.doubleClickPolling(),(t=e.querySelector("#cfg-hw-load-delay")).value=c.getHWLoadDelay(),(t=e.querySelector("#cfg-http-timeout")).value=c.getHttpRequestTimeout(),t.setAttribute("original-value",c.doubleClickPolling().toString()),(t=e.querySelector("#cfg-support-wo-registers")).checked=c.supportWORegisters(),t.setAttribute("original-value",c.supportWORegisters().toString()),r(e)}),document.addEventListener("act-popup-about",function(){var t=o(".about-popup");s.get("/about").then(function(e){var n=o("#key-value-holder-template").content.querySelector(".key-value-holder").cloneNode(!0),a=document.createDocumentFragment();t.querySelector(".dialog-content").innerHTML="",t.querySelector(".dialog-content").appendChild(n);var i=o("#key-value-item-template").content;for(var s in e)e.hasOwnProperty(s)&&(i.querySelector(".kv-item-name").innerHTML=s,i.querySelector(".kv-item-value").innerHTML=e[s],a.appendChild(i.cloneNode(!0)));n.insertBefore(a,n.querySelector(".static")),r(t),u.OK()}).catch(function(e){a(t),u.ERROR(e)})}),Promise.resolve()}}},{"../common/handler":5,"../common/state":10,"../utils/ajax":35,"../utils/calc":36,"../utils/helper":38}],9:[function(t,e,n){function r(){var t=l("#reg-search");t.value="",t.style.cursor="pointer",l("#clear-reg-search").classList.add("search-hidden"),l(".main-search-holder").classList.remove("long-search"),t.classList.add("disabled")}function a(){var t;t={detail:{type:c.getCurrentlySelectedTabType()}},document.dispatchEvent(new CustomEvent("act-restore-menu",t))}function i(t){return function(e){e.getAttribute("search").includes(t)?e.classList.remove("hidden"):e.classList.add("hidden")}}function o(t,e){return function(n){n.querySelector(e)?(n.querySelector(".page-sub-menu").classList.add("hidden"),n.classList.add("in-common"),Array.prototype.slice.call(n.querySelectorAll(".control-item")).forEach(i(t)),n.classList.remove("hidden")):n.classList.add("hidden")}}function s(t){return function(e){var n='.control-item[search*="'+t+'"]';e.querySelector(n)?(Array.prototype.slice.call(e.querySelectorAll(".section")).forEach(o(t,n)),e.classList.remove("hidden")):e.classList.add("hidden")}}var l=t("../utils/helper"),c=t("../common/tabs"),u=t("../common/menu"),d=/^[A-Za-z0-9\s\-_]*$/;e.exports={loaded:function(){return l("#reg-search").value="",l(".main-search-holder").addEventListener("click",function(t){if(0===t.button){var e=l("#reg-search");e.classList.remove("disabled"),e.focus(),t.target.style.cursor="text",l(".main-search-holder").classList.add("long-search"),l("#clear-reg-search").classList.remove("search-hidden")}},!0),l("#clear-reg-search").addEventListener("click",function(t){0===t.button&&(r(),l("#reg-search").dispatchEvent(new Event("input")))},!0),l("#reg-search").addEventListener("input",function(t){var e=t.target,n=e.value.toLowerCase().replace(/_/g," ").replace(/-/g," ");null!==n.match(d)?(e.classList.remove("bad-search"),n.length>2&&(l("#toggle-fav-button").classList.add("star-selected"),u.hideMenusAndTabs(),Array.prototype.slice.call(l.$(".container")).forEach(s(n)),document.dispatchEvent(new Event("act-reload-visible")))):e.classList.add("bad-search")}),l("#clear-menu-search").addEventListener("click",function(t){if(0===t.button){var e=l("#menu-search");e.value="",e.dispatchEvent(new Event("input"))}},!0),l(".menu-search-holder").addEventListener("click",function(t){if(0===t.button){var e=l("#menu-search");e.classList.remove("disabled"),e.focus()}}),l("#menu-search").addEventListener("blur",function(t){t.target.classList.add("disabled")}),l("#menu-search").addEventListener("input",function(t){var e=t.target,n=e.value.toLowerCase().replace(/_/g," ").replace(/-/g," ");null!==n.match(d)?(e.classList.remove("bad-search"),n.length>2?Array.prototype.slice.call(l.$(".menu:not(.hidden)")).forEach(function(t){t.querySelector('.section-link[search*="'+n+'"]')?(Array.prototype.slice.call(t.querySelectorAll(".section-link[search]")).forEach(function(t){t.getAttribute("search").includes(n)?t.classList.remove("hidden"):t.classList.add("hidden")}),t.classList.remove("hidden")):t.classList.add("hidden")}):a()):e.classList.add("bad-search")}),document.addEventListener("act-hide-reg-search",r),document.addEventListener("keyup",function(t){var e=t.target,n=t.keyCode||t.which;e.classList.contains("search")&&(27===n&&(e.value=""),""===e.value&&"reg-search"===e.id&&c.returnToPreviouslySelectedTab(),e.value.length>2&&e.dispatchEvent(new Event("input")))}),document.addEventListener("blur",function(t){var e=t.target;"classList"in e&&("reg-search"===e.id?r():"menu-search"===e.id&&e.value.length<3&&a())},!0),Promise.resolve()}}},{"../common/menu":6,"../common/tabs":11,"../utils/helper":38}],10:[function(t,e,n){function r(){}r.namespace="act/3.2",(r.fw={}).api={},r.fw.exists=!1,r.options={beforeunload:!0},r.histories={};var a={getHexRadixCommands:function(){var t=localStorage[r.namespace+"/hex"];try{var e=JSON.parse(t);if(Array.isArray(e))return e}catch(t){}return[]},setHexRadixCommands:function(t){Array.isArray(t)?localStorage[r.namespace+"/hex"]=JSON.stringify(t):localStorage[r.namespace+"/hex"]=[]},preventRequests:function(){localStorage[r.namespace+"/requestsPrevented"]=!0},allowRequests:function(){localStorage[r.namespace+"/requestsPrevented"]=!1},requestsPrevented:function(){return JSON.parse(localStorage[r.namespace+"/requestsPrevented"])},elementIsVisible:function(t){return null===t.closest(".hidden")},getSelectedTab:function(){var t=localStorage[r.namespace+"/tabs/selected"];return t&&t.length>0?t:(localStorage[r.namespace+"/tabs/selected"]="hw","hw")},saveStarredRegisters:function(t){Array.isArray(t)?localStorage[r.namespace+"/starred/registers"]=JSON.stringify(t):localStorage[r.namespace+"/starred/registers"]="[]"},loadStarredRegisters:function(){var t=localStorage[r.namespace+"/starred/registers"];try{var e=JSON.parse(t);if(Array.isArray(e))return e}catch(t){}return localStorage[r.namespace+"/starred/registers"]="[]",[]},saveStarredPages:function(t){Array.isArray(t)?localStorage[r.namespace+"/starred/pages"]=JSON.stringify(t):localStorage[r.namespace+"/starred/pages"]="[]"},loadStarredPages:function(){var t=localStorage[r.namespace+"/starred/pages"];try{var e=JSON.parse(t);if(Array.isArray(e))return e}catch(t){}return localStorage[r.namespace+"/starred/pages"]="[]",[]},hw:{setSelectedSectionName:function(t){localStorage[r.namespace+"/last-section/hw"]=t},hasSelectedSection:function(){return localStorage.hasOwnProperty(r.namespace+"/last-section/hw")},getSelectedSectionName:function(){return localStorage[r.namespace+"/last-section/hw"]}},api:{setSelectedSectionName:function(t){localStorage[r.namespace+"/last-section/api"]=t},hasSelectedSection:function(){return localStorage.hasOwnProperty(r.namespace+"/last-section/api")},getSelectedSectionName:function(){return localStorage[r.namespace+"/last-section/api"]},cache:function(t){r.fw.api=t,r.fw.exists=!0},exists:function(){return r.fw.exists},get:function(){return r.fw.api},drop:function(){r.fw.api={},r.fw.exists=!1}},file:{setSelectedSectionName:function(t){localStorage[r.namespace+"/last-section/file"]=t},hasSelectedSection:function(){return localStorage.hasOwnProperty(r.namespace+"/last-section/file")},getSelectedSectionName:function(){return localStorage[r.namespace+"/last-section/file"]}},addNewTabState:function(t){a[t]={setSelectedSectionName:function(e){localStorage[r.namespace+"/last-section/"+t]=e},hasSelectedSection:function(){return localStorage.hasOwnProperty(r.namespace+"/last-section/"+t)},getSelectedSectionName:function(){return localStorage[r.namespace+"/last-section/"+t]}}},setSelectedTab:function(t){localStorage[r.namespace+"/tabs/selected"]=t},clear:function(){localStorage.clear(),r.options.beforeunload=!1},mayBeforeUnload:function(){return r.options.beforeunload},getPollingPace:function(){var t=r.namespace+"/settings/polling-pace";if(localStorage.hasOwnProperty(t)){var e=parseInt(localStorage[t]);return e>=100?e:(localStorage[t]="100",100)}return 500},getHWLoadDelay:function(){var t=r.namespace+"/settings/hw-load-delay";return localStorage.hasOwnProperty(t)?parseInt(localStorage[t]):100},getHttpRequestTimeout:function(){var t=r.namespace+"/settings/http-timeout";return localStorage.hasOwnProperty(t)?parseInt(localStorage[t]):3e5},fancyJSON:function(){var t=r.namespace+"/settings/fancy-json";return!localStorage.hasOwnProperty(t)||JSON.parse(localStorage[t])},useNavHistLabels:function(){var t=r.namespace+"/settings/nav-hist-labels";return!localStorage.hasOwnProperty(t)||JSON.parse(localStorage[t])},doubleClickPolling:function(){var t=r.namespace+"/settings/double-click-polling";return!localStorage.hasOwnProperty(t)||JSON.parse(localStorage[t])},supportWORegisters:function(){var t=r.namespace+"/settings/support-wo-registers";return!localStorage.hasOwnProperty(t)||JSON.parse(localStorage[t])},setSetting:function(t,e){var n=r.namespace+"/settings/"+t;switch(typeof e){case"number":localStorage[n]=e.toString();break;case"boolean":localStorage[n]=!!e}},navigation:{addStep:function(t,e){t in r.histories||(r.histories[t]={history:[],pointer:null});var n=r.histories[t];null!==n.pointer&&n.pointer<n.history.length-1&&(n.history=n.history.slice(0,n.pointer+1)),n.history.push(e),n.pointer=n.history.indexOf(e)},getPrevious:function(t){var e=r.histories[t];return e?null===e.pointer?null:e.pointer>0?(e.pointer--,e.history[e.pointer]):null:null},getNext:function(t){var e=r.histories[t];return e?null===e.pointer?null:e.pointer<e.history.length-1?(e.pointer++,e.history[e.pointer]):null:null},getHistory:function(t){return r.histories[t]}}};e.exports=a},{}],11:[function(t,e,n){var r=t("../utils/helper"),a=t("../common/state");e.exports={getCurrentlySelectedTabType:function(){return document.querySelector(".tab-radio:checked")?document.querySelector(".tab-radio:checked").getAttribute("value"):null},returnToPreviouslySelectedTab:function(){var t=a.getSelectedTab(),e=r('.tab-radio[value="'+t+'"]');e&&r('.tab-label[for="'+t+'-tab"]:not(.hidden)')||(Array.prototype.slice.call(r.$(".container")).forEach(function(t){t.classList.add("hidden")}),e=r('.tab-radio[value="hw"]')),e&&(e.checked=!0,e.dispatchEvent(new Event("change")))},loaded:function(){return document.addEventListener("change",function(t){var e=t.target;if(e.classList.contains("tab-radio")&&e.checked){var n=e.value;"api"===n&&e.classList.contains("no-command-json")&&r("#file-upload-input").click(),Array.prototype.slice.call(r.$(".container:not(."+n+"-controls):not(.hidden)")).forEach(function(t){t.classList.add("hidden")}),Array.prototype.slice.call(r.$('.section[type="'+n+'"]')).forEach(function(t){t.querySelector(".favourites-page-buttons").classList.add("hidden"),t.querySelector(".page-sub-menu-right-buttons").classList.remove("hidden"),t.querySelector(".page-sub-menu-left-buttons").classList.remove("hidden")});var i=r(".container."+n+"-controls.hidden");i&&i.classList.remove("hidden");var o;o={detail:{type:n}},document.dispatchEvent(new CustomEvent("act-restore-menu",o));var s=r("#menu-search");s.value="",s.dispatchEvent(new Event("input"));var l=r("#reg-search");l.value="",l.dispatchEvent(new Event("input")),r("#toggle-fav-button").classList.add("star-selected"),o={detail:{type:n}},document.dispatchEvent(new CustomEvent("act-select-last-menu-item",o)),a.setSelectedTab(n)}},!0),document.addEventListener("click",function(t){if(0===t.button){var e=t.target;if("classList"in e){var n,r,i,o=e.closest(".section");o&&(e.classList.contains("navigate-back")||e.classList.contains("nav-bck-span")?o.hasAttribute("type")&&(n=o.getAttribute("type"),(r=a.navigation.getPrevious(n))&&(i={detail:{name:r,type:n,omit:!0}})):(e.classList.contains("navigate-forward")||e.classList.contains("nav-fwd-span"))&&o.hasAttribute("type")&&(n=o.getAttribute("type"),(r=a.navigation.getNext(n))&&(i={detail:{name:r,type:n,omit:!0}})),i&&document.dispatchEvent(new CustomEvent("act-select-section",i)))}}}),document.addEventListener("act-update-history-nav",function(t){var e=t.detail;if(e){var n=e.name,i=e.type;if(n&&i){var o=r('.section[section="'+n+'"][type="'+i+'"]');if(o){var s=o.querySelector(".navigate-forward"),l=o.querySelector(".navigate-back");if(s&&l){s.classList.add("disabled"),s.innerHTML="",s.setAttribute("title",""),l.classList.add("disabled"),l.innerHTML="",l.setAttribute("title","");var c,u=a.navigation.getHistory(i);u&&null!==u.pointer&&u.pointer>=0&&u.history.length>1&&(u.pointer>0&&(l.classList.remove("disabled"),c=u.history[u.pointer-1].replace(/^CALIBRATION_/,""),a.useNavHistLabels()?l.innerHTML='<span class="hist-label nav-bck-span">'+c+"</span>":l.setAttribute("title",c)),u.pointer<u.history.length-1&&(s.classList.remove("disabled"),c=u.history[u.pointer+1].replace(/^CALIBRATION_/,""),a.useNavHistLabels()?s.innerHTML='<span class="hist-label nav-fwd-span">'+c+"</span>":s.setAttribute("title",c)))}}}}}),Promise.resolve()}}},{"../common/state":10,"../utils/helper":38}],12:[function(t,e,n){function r(t){t.innerHTML=t.getAttribute("original-value"),a(t)}function a(t){t.removeAttribute("original-value"),t.classList.remove("cell-editable"),t.removeAttribute("contenteditable")}function i(t){var e=parseInt(t.getAttribute("index")),n=t.parentNode,i=n.parentNode,o=n.classList.contains("hex")?16:10,s=parseInt(t.innerHTML,o),d=parseInt(i.getAttribute("max"));if(isNaN(s)||s<0||s>d)t.innerHTML=t.getAttribute("original-value");else{var p,m,f=parseInt(i.getAttribute("offset"));Promise.resolve().then(function(){var t,e;if(isNaN(f))p=8*parseInt(i.getAttribute("sz")),m=p,e=i.querySelectorAll(".array-cell"),t=[],Array.prototype.slice.call(e).forEach(function(e){Array.prototype.push.apply(t,c.itemToBytes(parseInt(e.innerHTML,o),p,m))});else if("lut"===i.getAttribute("data-type")){p=parseInt(i.getAttribute("bits")),m=parseInt(i.getAttribute("align")),e=n.querySelectorAll(".array-cell"),t=[];var r;for(r=0;r<e.length;r++)t.push(parseInt(e[r].innerHTML,o))}else p=parseInt(i.getAttribute("bits")),m=parseInt(i.getAttribute("align")),t=c.itemToBytes(s,p,m);return Promise.resolve(t)}).then(function(t){return null===t?Promise.resolve(null):isNaN(f)?l.fwSaveArray(parseInt(i.getAttribute("command")),t).then(function(){return c.itemToBytes(s,p,m)}).catch(u.ERROR):"lut"===i.getAttribute("data-type")?l.hwWrite(null,i.getAttribute("reg-type"),parseInt(i.getAttribute("offset")),c.arrayToBytes(t,p,m)).catch(u.ERROR):l.hwWrite(null,i.getAttribute("reg-type"),f+(m>>3)*e,t).catch(u.ERROR)}).then(function(e){var n=i.getAttribute("data-type"),s=c.bytesToArray(e,p,m);if("lut"===n)if(null===e)r(t);else{var l;for(l=0;l<s.length;l++)null===s[l]?r(t):a(t,s[l].toString(o))}else null===e?r(t):null===s?r(t):a(t,s.toString(o))}).catch(function(e){u.ERROR(e),r(t)})}}function o(t){t.querySelector(".radix-button").classList.add("hex");var e=t.querySelector("input.val-text");if(e)e.classList.toggle("hex"),e.classList.contains("hex")?e.value=parseInt(e.value,10).toString(16):e.value=parseInt(e.value,16).toString(10);else{var n=t.querySelector(".array-table");if(n){n.classList.toggle("hex");var r,a=parseInt(n.getAttribute("max"));n.classList.contains("hex")?(r=a.toString(16).length+1+"ex",Array.prototype.slice.call(n.childNodes).forEach(function(t){t.innerHTML=parseInt(t.innerHTML,10).toString(16),t.style.width=r})):(r=a.toString(10).length+1+"ex",Array.prototype.slice.call(n.childNodes).forEach(function(t){t.innerHTML=parseInt(t.innerHTML,16).toString(10),t.style.width=r}))}}}var s=t("../utils/helper"),l=t("../utils/ajax"),c=t("../utils/calc"),u=t("../common/handler"),d=t("../common/state"),p=function(){return null!==s(".main-search-holder.long-search")},m=function(t){var e=s('.tab-radio[value="'+t+'"]');e&&(e.checked=!0,e.dispatchEvent(new Event("change")))};e.exports={loaded:function(){document.addEventListener("click",function(t){if(0===t.button){var e=t.target;e.classList.contains("array-cell")&&(t.preventDefault(),e.setAttribute("contenteditable",""),e.setAttribute("original-value",e.innerHTML),e.classList.add("cell-editable"),e.focus())}}),document.addEventListener("keypress",function(t){var e=t.target,n=t.keyCode||t.which;if(e.classList.contains("array-cell")&&13===n){var r=t.target.parentNode.classList.contains("hex")?16:10,o=parseInt(t.target.innerHTML,r);parseInt(t.target.getAttribute("original-value"),r)===o?(t.target.removeAttribute("original-value"),a(t.target)):(t.preventDefault(),i(t.target))}}),document.addEventListener("keydown",function(t){var e=t.target,n=t.keyCode||t.which;e.classList.contains("array-cell")&&27===n&&(t.preventDefault(),r(e))}),document.addEventListener("blur",function(t){if("classList"in t.target&&t.target.classList.contains("array-cell")){var e=t.target.parentNode.classList.contains("hex")?16:10,n=parseInt(t.target.innerHTML,e);parseInt(t.target.getAttribute("original-value"),e)===n?(t.target.removeAttribute("original-value"),a(t.target)):(t.preventDefault(),i(t.target))}},!0),document.addEventListener("click",function(t){if(0===t.button){var e=t.target;if(e.classList.contains("radix-button")){var n=e.parentNode;e.classList.toggle("hex");var r=n.getAttribute("command"),a=d.getHexRadixCommands();if(e.classList.contains("hex"))a.push(r);else{var i;for(i=a.length-1;i>=0;i--)a[i]===r&&a.splice(i,1)}d.setHexRadixCommands(a);var o=n.querySelector("input.val-text");if(o)o.classList.toggle("hex"),o.classList.contains("hex")?o.value=parseInt(o.value,10).toString(16):o.value=parseInt(o.value,16).toString(10);else{var s=n.querySelector(".array-table");if(s){s.classList.toggle("hex");var l,c=parseInt(s.getAttribute("max"));s.classList.contains("hex")?(l=c.toString(16).length+1+"ex",Array.prototype.slice.call(s.childNodes).forEach(function(t){t.innerHTML=parseInt(t.innerHTML,10).toString(16),t.style.width=l})):(l=c.toString(10).length+1+"ex",Array.prototype.slice.call(s.childNodes).forEach(function(t){t.innerHTML=parseInt(t.innerHTML,16).toString(10),t.style.width=l}))}}}else if("h3"===e.tagName.toLowerCase()&&e.classList.contains("s-header")){var u=e.closest(".section");if(u&&u.classList.contains("in-common")){p()&&document.dispatchEvent(new Event("act-hide-reg-search"));var f=u.getAttribute("type"),v=u.getAttribute("section");m(f);var h;h={detail:{name:v,type:f}},document.dispatchEvent(new CustomEvent("act-select-section",h))}}else if(e.classList.contains("bit-switcher")){var g=e.parentNode.querySelector(".data-bit");g&&g.click()}}}),s("#read-all-button").addEventListener("click",function(t){0===t.button&&document.dispatchEvent(new Event("act-reload-visible"))});var t,e=d.getHexRadixCommands();for(t=0;t<e.length;t++)o(document.querySelector('article[command="'+e[t]+'"]'));return Promise.resolve()}}},{"../common/handler":5,"../common/state":10,"../utils/ajax":35,"../utils/calc":36,"../utils/helper":38}],13:[function(t,e,n){!function(){var t=document.querySelectorAll("template");if(0!==t.length){for(var e=!0,n=0;n<t.length;n++)if(0!==t[n].childNodes.length){e=!1;break}if(!e)for(var r=0;r<t.length;r++){for(var a=t[r].childNodes,i=0;i<a.length;i++)t[r].content.appendChild(a[i].cloneNode(!0));for(;t[r].hasChildNodes();)t[r].removeChild(t[r].childNodes[0])}}}()},{}],14:[function(t,e,n){function r(t,e){return t&&e?"RW":t?"RO":e?"WO":"NA"}function a(t,e,n,a){var i,o,u,d,p,m,f,v,h,g,b,y,A=s("#api-ctrl-template").content,w=A.querySelector(".control-item"),S=A.querySelector(".data-range"),L=A.querySelector(".val-text"),E=A.querySelector(".data-bit"),x=A.querySelector(".cmd-label"),R=A.querySelector(".bit-hint"),q=s("#api-enum-template").content,N=q.querySelector(".radio-label"),T=N.querySelector("input"),I=N.querySelector("span"),C=l.supportWORegisters(),k=!1,O=document.createDocumentFragment();for(var M in n)if(n.hasOwnProperty(M)){if(i=n[M],u=i.dir.includes("GET"),d=i.dir.includes("SET"),h=r(u,d),g=i.value,w.setAttribute("section",e.toString()),w.setAttribute("section-name",a),w.setAttribute("command",g.toString()),w.setAttribute("display-text",M),w.setAttribute("search",M.toLowerCase().replace(/_/g," ")),w.setAttribute("data-mode",h),"RO"===h)E.setAttribute("disabled","disabled"),L.setAttribute("disabled","disabled"),S.setAttribute("disabled","disabled"),k=!0;else if("RW"===h)E.removeAttribute("disabled"),L.removeAttribute("disabled"),S.removeAttribute("disabled"),k=!1;else{if("WO"!==h||!C)continue;E.removeAttribute("disabled"),L.removeAttribute("disabled"),L.value=0,S.removeAttribute("disabled"),S.value=0,k=!1}if(x.innerHTML=M,x.removeAttribute("title"),x.removeAttribute("tooltip"),"description"in i?x.setAttribute("tooltip",i.description):x.setAttribute("title",M),o=i.options,0===Object.keys(o).length){m=e+"-"+g;var P="max"in i?parseInt(i.max):4294967295;x.setAttribute("for",m),1===P?(E.setAttribute("id",m),w.setAttribute("data-type","bit"),(f=O.appendChild(w.cloneNode(!0))).removeChild(f.querySelector(".data-range")),f.removeChild(f.querySelector(".val-text")),f.removeChild(f.querySelector(".enum-holder")),f.removeChild(f.querySelector(".bit-hint")),f.removeChild(f.querySelector(".radix-button"))):(L.setAttribute("id",m),w.setAttribute("data-type","uint"),S.setAttribute("max",P.toString()),R.innerHTML=Math.round(Math.log(P)*Math.LOG2E).toString(),(f=O.appendChild(w.cloneNode(!0))).removeChild(f.querySelector(".enum-holder")),f.removeChild(f.querySelector(".bit-switcher")),f.removeChild(f.querySelector(".data-bit")))}else{x.removeAttribute("for"),w.setAttribute("data-type","enum"),(f=O.appendChild(w.cloneNode(!0))).removeChild(f.querySelector(".data-range")),f.removeChild(f.querySelector(".val-text")),f.removeChild(f.querySelector(".bit-switcher")),f.removeChild(f.querySelector(".data-bit")),f.removeChild(f.querySelector(".bit-hint")),f.removeChild(f.querySelector(".radix-button")),v=f.querySelector(".enum-holder");var H=document.createDocumentFragment();p=e+"-"+g;for(var j in o)o.hasOwnProperty(j)&&(m="api-"+p+"-"+(b=o[j].value),T.setAttribute("id",m),T.setAttribute("name",p),T.setAttribute("type","radio"),T.value=b,T.disabled=k,N.setAttribute("for",m),I.innerHTML=j,H.appendChild(q.cloneNode(!0)));v.appendChild(H)}c.createButtons(f),(y=f.querySelector(".star-button"))&&y.setAttribute("fav-name",M)}t.appendChild(O)}function i(){l.api.drop();for(var t=s(".fav-menu[type=api]");t.firstChild;)t.removeChild(t.firstChild);for(t=s(".tab-menu[type=api]");t.firstChild;)t.removeChild(t.firstChild);for(var e=s(".api-controls");e.firstChild;)e.removeChild(e.firstChild);e.classList.add("hidden"),s('.tab-radio[value="api"]').classList.add("no-command-json");var n=s(".no-api-warning");n&&n.classList.remove("hidden"),s("#drop-fw-api").classList.add("disabled"),s("#save-api-values").classList.add("disabled"),s("#save-visible-api-values").classList.add("disabled")}function o(t){var e,n,r=0;n={detail:"Please wait while operation completes"},document.dispatchEvent(new CustomEvent("act-popup-progress",n));var a,i=document.getElementById("modal-progress");a=t?document.querySelectorAll(".api-controls section:not(.hidden)"):document.querySelectorAll(".api-controls section");for(var o=[],s=0;s<a.length;s++){var l,c=a[s];l=t?c.querySelectorAll('.control-item:not(.hidden):not([data-mode="WO"])'):c.querySelectorAll('.control-item:not([data-mode="WO"])');for(var u=0;u<l.length;u++)o.push(function(t){var n={"command-name":t.getAttribute("display-text"),command:+t.getAttribute("command"),type:t.getAttribute("data-type"),section:+t.getAttribute("section"),"section-name":t.getAttribute("section-name")};return p.apiGet(n.section,n.command,!1).then(function(a){var o=parseInt(a),s=n.type;if("uint"===s)n.value=o;else if("enum"===s){n.value=o;for(var l=t.querySelectorAll('input[type="radio"]'),c=0,u=l.length;c<u;c++)if(parseInt(l[c].value)===o){n.text=l[c].parentNode.querySelector("span").innerHTML;break}}else"bit"===s?(n.value=0!==o?1:0,n.text=(0!==o).toString()):(n.value=o,n.text="UNKNOWN TYPE: "+s);return r+=e,i.setAttribute("value",Math.round(r).toString()),Promise.resolve(n)})}(l[u]))}o.length>0?(e=100/o.length,Promise.all(o).then(function(t){d.save("api-values.json","application/json",t),document.dispatchEvent(new Event("act-cover-progress"))}).catch(m.ERROR)):document.dispatchEvent(new Event("act-cover-progress"))}var s=t("../utils/helper"),l=t("../common/state"),c=t("../common/buttons"),u=t("./types"),d=t("../utils/file"),p=t("../utils/ajax"),m=t("../common/handler");e.exports={loaded:function(){return document.addEventListener("act-fw-api-loaded",function(){var t=l.api.get();s('.tab-label[for="api-tab"]').classList.remove("hidden"),s("#drop-fw-api").classList.remove("disabled"),s("#save-api-values").classList.remove("disabled"),s("#save-visible-api-values").classList.remove("disabled");var e=s("#api-menu-item-template").content.querySelector("li.section-link"),n=s("#api-section-template").content.querySelector(".section");n.classList.remove("calibrations-section");var r,i,o,c=n.querySelector("h3"),u=s(".tab-menu[type=api]"),d=document.createDocumentFragment(),p=s(".api-controls"),m=document.createDocumentFragment();for(var f in t.sections)t.sections.hasOwnProperty(f)&&(o=t.sections[f].commands,Object.keys(o).length>0&&(e.setAttribute("section",f),e.setAttribute("type","api"),e.setAttribute("search",f.toLowerCase().replace(/_/g," ")),e.innerHTML=f,d.appendChild(e.cloneNode(!0)),c.innerHTML=f,n.setAttribute("section",f),r=t.sections[f].value,(i=m.appendChild(n.cloneNode(!0))).setAttribute("type","api"),a(i,r,o,f)));u.appendChild(d),p.appendChild(m);var v;v={detail:{type:"api"}},document.dispatchEvent(new CustomEvent("act-select-last-menu-item",v)),s('.tab-radio[value="api"]').classList.remove("no-command-json");var h=s(".no-api-warning");h&&h.classList.add("hidden")}),document.addEventListener("act-api-value-changed",function(t){var e=t.detail,n=e.section,r=e.command,a=s('.control-item[command="'+r+'"]');if(l.elementIsVisible(a)){var i=e.value;if("number"==typeof n&&"number"==typeof r&&"number"==typeof i){var o=s('.control-item[section="'+n+'"][command="'+r+'"][type=api]');o&&u.display(o,i)}}}),document.addEventListener("act-fw-drop",i),document.addEventListener("act-save-api-values",function(){o(!1)}),document.addEventListener("act-save-visible-api-values",function(){o(!0)}),Promise.resolve()}}},{"../common/buttons":1,"../common/handler":5,"../common/state":10,"../utils/ajax":35,"../utils/file":37,"../utils/helper":38,"./types":18}],15:[function(t,e,n){function r(t){var e=g.api.get();return e?b.fwGetPage(e.sections.TSYSTEM.value,e.sections.TSYSTEM.commands.BUFFER_DATA_TYPE.value,t):Promise.reject("No FW API loaded")}function a(t,e){return r(t).then(function(n){var r=(1073709056&n)>>15,a=32767&n,i=1+(n>>>30),o=h('.control-item[command="'+t+'"][type="'+e+'"]'),s=8*i;r>0&&a>0&&i>0?(o.querySelector(".bit-hint").innerHTML=s.toString(),o.setAttribute("rs",r.toString()),o.setAttribute("cs",a.toString()),o.setAttribute("nodes",(r*a).toString()),o.setAttribute("sz",i.toString()),o.setAttribute("max",(Math.pow(2,s)-1).toString())):(o.setAttribute("rs","0"),o.setAttribute("cs","0"),o.setAttribute("nodes","0"),o.setAttribute("sz","0"),o.style="justify-content: flex-start",o.innerHTML='<div class="calibration-error">This calibration is not supported by back-end</div>')})}function i(t){return t.replace(/_/," ").toLowerCase().capitalize()}function o(t){document.querySelector(".dynamic-menu-delimiter").classList.remove("hidden");var e=document.createElement("li");e.classList.add("opt-menu-item"),e.classList.add("save-calibrations-menu-item"),e.id="save-"+t.replace(/_/,"-").toLowerCase(),e.innerHTML="Save "+i(t),e.addEventListener("click",function(){if(g.api.exists){var e=g.api.get()[t];m(t,e)}});var n=document.querySelector("#options-menu ul");n.insertBefore(e,n.querySelectorAll(".menu-delimiter")[3])}function s(t){var e=document.createElement("input");e.setAttribute("id",t+"-tab"),e.setAttribute("name","tabs"),e.setAttribute("type","radio"),e.classList.add("tab-radio"),e.classList.add("calibrations-tab"),e.value=t;var n=document.createElement("label");n.setAttribute("for",t+"-tab"),n.classList.add("tab-label"),n.classList.add("calibrations-tab"),n.innerHTML=i(t);var r=document.querySelector(".tab-switch");r.insertBefore(e,document.getElementById("file-tab")),r.insertBefore(n,document.getElementById("file-tab"))}function l(t,e,n,r){var a=h("#calibration-ctrl-template").content.querySelector(".control-item"),i=parseInt(e.value),o=n.replace(/^CALIBRATION_/,"");a.setAttribute("display-text",n),a.setAttribute("type",r),a.setAttribute("gr","calibrations"),a.setAttribute("command",i.toString()),a.setAttribute("search",o.toLowerCase().replace(/_/g," "));var s=a.cloneNode(!0);w.createButtons(s);var l=s.querySelector(".star-button");l&&l.setAttribute("fav-name",n);var c=s.querySelector(".cmd-label");return c.innerHTML=o,c.removeAttribute("title"),c.removeAttribute("tooltip"),"description"in e?c.setAttribute("tooltip",e.description):c.setAttribute("title",n),t.appendChild(s),Promise.resolve()}function c(){document.querySelector(".dynamic-menu-delimiter").classList.add("hidden"),Array.prototype.slice.call(document.querySelectorAll(".save-calibrations-menu-item")).forEach(function(t){t.parentNode.removeChild(t)}),Array.prototype.slice.call(document.querySelectorAll(".calibrations-menu")).forEach(function(t){t.parentNode.removeChild(t)}),Array.prototype.slice.call(document.querySelectorAll(".calibrations-tab")).forEach(function(t){t.parentNode.removeChild(t)}),Array.prototype.slice.call(document.querySelectorAll(".calibrations-controls")).forEach(function(t){t.parentNode.removeChild(t)})}function u(t,e,n,r,a){for(var i=h("#array-cell-template").content.querySelector("li"),o=Math.pow(2,8*a)-1;t.firstChild;)t.removeChild(t.firstChild);t.setAttribute("max",o.toString()),t.parentNode.querySelector(".mxn-hint").innerHTML=n+"x"+r;for(var s=t.classList.contains("hex")?16:10,l=e.length,c=o.toString(s).length+1+"ex",u=0;u<l;u++)i.innerHTML=e[u].toString(s),i.setAttribute("tooltip",u+"-th element"),i.setAttribute("index",u.toString()),i.style.width=c,t.appendChild(i.cloneNode(!0))}function d(t,e){var n=document.createElement("ul");n.classList.add("menu"),n.classList.add("fav-menu"),n.classList.add("calibrations-menu"),n.classList.add("hidden"),n.setAttribute("type",e);var r=document.createElement("ul");r.classList.add("menu"),r.classList.add("tab-menu"),r.classList.add("calibrations-menu"),r.classList.add("hidden"),r.setAttribute("type",e);var a=document.createElement("li");a.classList.add("menu-delimiter"),a.classList.add("hidden"),n.appendChild(a);var i=h("#api-menu-item-template").content.querySelector(".section-link");for(var o in t)if(t.hasOwnProperty(o)){i.setAttribute("type",e),i.setAttribute("search",o.toLowerCase().replace(/_/g," ")),i.setAttribute("section",o);var s=t[o];i.removeAttribute("title"),i.removeAttribute("tooltip"),"description"in s?i.setAttribute("tooltip",s.description):i.setAttribute("title",o),i.innerHTML=o.replace(/^CALIBRATION_/,""),r.appendChild(i.cloneNode(!0))}var l=document.querySelector(".navigation");l.appendChild(n),l.appendChild(r)}function p(t,e){var n=document.createElement("div");n.classList.add("container"),n.classList.add(e+"-controls"),n.classList.add("calibrations-controls"),n.classList.add("hidden");var r=h("#api-section-template").content.querySelector(".section");r.classList.add("calibrations-section");var a,i=r.querySelector("h3"),o=r.querySelector(".section-description"),s=[];for(var c in t)if(t.hasOwnProperty(c)){i.innerHTML=c.replace(/^CALIBRATION_/,""),r.setAttribute("section",c),r.setAttribute("type",e);var u=t[c];"description"in u?(o.innerHTML=u.description,o.classList.remove("transparent-text")):(o.innerHTML=c,o.classList.add("transparent-text")),a=n.appendChild(r.cloneNode(!0)),o.innerHTML="",o.classList.add("transparent-text"),s.push(l(a,t[c],c,e))}return document.querySelector(".content").appendChild(n),Promise.all(s)}function m(t,e){var n=!0;g.allowRequests();var r,a=Object.keys(e);r={detail:"Please wait while operation completes"},document.dispatchEvent(new CustomEvent("act-popup-progress",r));var i=h("#modal-progress");i.max=a.length;var o=a.map(function(r,a){if(g.requestsPrevented())return Promise.reject(new Error("Request was cancelled"));if(!n)return Promise.reject(new Error("Request was interrupted"));var o=parseInt(e[r].value),s=h('.control-item[type="'+t+'"][command="'+o+'"]');return s?f(t)(s).catch(function(t){if(t){var e;n&&(e={detail:{message:t+" : "+s.getAttribute("display-text")}},document.dispatchEvent(new CustomEvent("act-popup-log",e))),S.ERROR(t+" : "+s.getAttribute("display-text")),n=!1}}).then(function(t){if(a>i.value&&(i.value=a),Array.isArray(t)){var e=parseInt(s.getAttribute("sz")),n=parseInt(s.getAttribute("rs")),o=parseInt(s.getAttribute("cs")),l=8*e,c=y.bytesToArray(t,l,l);return Promise.resolve({name:r,width:e,rows:n,cols:o,value:c})}return Promise.resolve(null)}).catch(S.ERROR):Promise.resolve(null)});Promise.all(o).then(function(e){if(g.requestsPrevented());else{i.value=i.max;var r={target:t,luts:e.filter(function(t){return null!==t})};n&&A.save(t.replace(/_/,"-").toLowerCase()+".json","application/json",r)}}).catch(function(t){if(t){var e;e={detail:{message:"ERROR:"+t}},document.dispatchEvent(new CustomEvent("act-popup-log",e)),S.ERROR(t),n=!1}}).then(function(){n&&document.dispatchEvent(new Event("act-cover-progress"))})}function f(t){return function(e){var n=parseInt(e.getAttribute("command")),r=parseInt(e.getAttribute("nodes")),i=parseInt(e.getAttribute("sz"));return isNaN(n)?Promise.resolve(null):Promise.resolve(isNaN(r)||isNaN(i)).then(function(e){return e?a(n,t).catch(S.ERROR):Promise.resolve()}).then(function(){return r=parseInt(e.getAttribute("nodes")),i=parseInt(e.getAttribute("sz")),isNaN(r)||isNaN(i)||r<=0||i<=0?Promise.reject("This calibration is not supported: "+e.getAttribute("display-text")).catch(S.ERROR):b.fwLoadArray(n,r*i).catch(S.ERROR)})}}function v(t){return function(e){var n=e.querySelectorAll(".control-item:not(.hidden)");Array.prototype.slice.call(n).forEach(f(t))}}var h=t("../utils/helper"),g=t("../common/state"),b=t("../utils/ajax"),y=t("../utils/calc"),A=t("../utils/file"),w=t("../common/buttons"),S=t("../common/handler"),L=t("../common/tabs");e.exports={loaded:function(){return document.addEventListener("act-fw-api-loaded",function(){var t=g.api.get(),e={dirs:!0,dynamic_state:!0,errors:!0,file_transfer:!0,returns:!0,sections:!0,selfcheck:!0,version:!0};for(var n in t)t.hasOwnProperty(n)&&(n in e||(g.addNewTabState(n),s(n),o(n),d(t[n],n),p(t[n],n).then(function(){if(L.getCurrentlySelectedTabType()===n){var t;t={detail:{type:n}},document.dispatchEvent(new CustomEvent("act-select-last-menu-item",t))}}).catch(S.FATAL)))}),document.addEventListener("act-calibration-value-changed",function(t){var e=t.detail,n=e.page,r=e.bytes;if("number"==typeof n&&Array.isArray(r)){var a=h('.control-item[command="'+n+'"][gr="calibrations"]');if(a&&g.elementIsVisible(a)&&a.getAttribute("type").contains("calibrations")){var i=parseInt(a.getAttribute("sz")),o=8*i,s=y.bytesToArray(r,o,o);if(null===s);else{var l=parseInt(a.getAttribute("rs")),c=parseInt(a.getAttribute("cs"));u(a.querySelector(".array-table"),s,l,c,i),setTimeout(function(){a.querySelector(".reload-button").classList.remove("reloading")},100),S.OK()}}}}),document.addEventListener("click",function(t){if(0===t.button){var e=t.target;if(e.classList.contains("reload-button")){if(e.classList.contains("reloading")||e.classList.contains("polling"))return;var n=e.closest(".control-item"),r=n.getAttribute("type");if(r.contains("calibrations")){f(r)(n).catch(S.ERROR);var a;a={detail:{ctrl:n}},document.dispatchEvent(new CustomEvent("refresh-graph",a))}}}}),document.addEventListener("act-reload-visible",function(){var t={};Array.prototype.slice.call(h.$(".calibrations-section:not(.hidden)")).forEach(function(e){var n=e.getAttribute("type");n in t?t[n].push(e):t[n]=[e]});for(var e in t)t.hasOwnProperty(e)&&Array.prototype.slice.call(t[e]).forEach(v(e))}),document.addEventListener("act-fw-drop",c),Promise.resolve()}}},{"../common/buttons":1,"../common/handler":5,"../common/state":10,"../common/tabs":11,"../utils/ajax":35,"../utils/calc":36,"../utils/file":37,"../utils/helper":38}],16:[function(t,e,n){function r(t){if(t&&"sections"in t&&"TSELFTEST"in t.sections){var e=!1;for(var n in t)if(t.hasOwnProperty(n)&&n.contains("calibrations")){e=!0;break}return!e||!!("TSYSTEM"in t.sections&&"value"in t.sections.TSYSTEM&&"commands"in t.sections.TSYSTEM&&"BUFFER_DATA_TYPE"in t.sections.TSYSTEM.commands)&&"value"in t.sections.TSYSTEM.commands.BUFFER_DATA_TYPE}return!1}function a(){return d.get("/command.json").then(function(t){return p.api.cache(t),Promise.resolve(r(t))}).then(function(t){t?document.dispatchEvent(new Event("act-fw-api-loaded")):(document.dispatchEvent(new Event("act-fw-drop")),m.ERROR("FW API file is invalid"))}).catch(function(){})}function i(){d.fwDeleteApi().catch(m.ERROR),u(".kv-item-value.fw-revision").innerHTML=""}function o(t,e){var n,r=parseInt(e.getAttribute("section")),a=parseInt(e.getAttribute("command"));n=t.classList.contains("hex")?parseInt(t.value,16):parseInt(t.value,10),isNaN(n)||(d.fwSet(r,a,n).catch(m.ERROR),e.querySelector(".reload-button").classList.add("reloading"),setTimeout(function(){e.querySelector(".reload-button").classList.remove("reloading")},32e3))}function s(t){var e=parseInt(t.getAttribute("section")),n=parseInt(t.getAttribute("command"));d.apiGet(e,n).catch(m.ERROR),t.querySelector(".reload-button").classList.add("reloading"),setTimeout(function(){t.querySelector(".reload-button").classList.remove("reloading")},32e3)}function l(t){var e=t.querySelectorAll('.control-item:not(.hidden):not([data-mode="WO"])');Array.prototype.slice.call(e).forEach(s)}function c(t,e){var n=parseInt(t.getAttribute("section")),r=parseInt(t.getAttribute("command"));isNaN(n)||isNaN(r)||isNaN(e)||d.fwSet(n,r,parseInt(e)).catch(m.ERROR)}var u=t("../utils/helper"),d=t("../utils/ajax"),p=t("../common/state"),m=t("../common/handler");e.exports={loaded:function(){return document.addEventListener("click",function(t){if(0===t.button){var e,n,r,a=t.target;if(a.classList.contains("reload-button")&&"api"===(e=a.closest(".control-item")).getAttribute("type"))if(t.shiftKey){var i={};i.detail={control:e,type:"api"},document.dispatchEvent(new CustomEvent("act-polling",i))}else{if(a.classList.contains("reloading")||a.classList.contains("polling"))return;n=parseInt(e.getAttribute("section")),r=parseInt(e.getAttribute("command")),d.apiGet(n,r).catch(m.ERROR),a.classList.add("reloading"),setTimeout(function(){a.classList.remove("reloading")},32e3)}}}),["change","input"].forEach(function(t){document.addEventListener(t,function(e){var n=e.target,r=n.closest(".control-item"),a=null;null!==r&&"api"===r.getAttribute("type")&&(n.classList.contains("radio-button")||n.classList.contains("data-range")&&"input"===t?a=n.value:n.classList.contains("data-bit")&&(a=n.checked?1:0),null===a||c(r,a))})}),document.addEventListener("keypress",function(t){var e=t.target,n=t.keyCode||t.which;if(e.classList.contains("val-text")){var r=e.parentNode;"api"===r.getAttribute("type")&&13===n&&(o(e,r),e.setAttribute("original-value",e.value))}}),document.addEventListener("focus",function(t){var e=t.target;"classList"in e&&e.classList.contains("val-text")&&e.setAttribute("original-value",e.value)},!0),document.addEventListener("blur",function(t){var e=t.target;if("classList"in e&&e.classList.contains("val-text")){var n=e.parentNode;if("api"===n.getAttribute("type")&&e.hasAttribute("original-value")){var r=e.classList.contains("hex")?16:10,a=parseInt(e.value,r);parseInt(e.getAttribute("original-value"),r)!==a&&o(e,n),e.removeAttribute("original-value")}}},!0),document.addEventListener("act-reload-visible",function(){var t=u.$(".section:not(.hidden)[type=api]");Array.prototype.slice.call(t).forEach(l)}),document.addEventListener("act-fw-drop",i),document.addEventListener("act-fw-api-loaded",function(){var t=p.api.get();if("selfcheck"in t&&"FIRMWARE_ID"in t.selfcheck&&"value"in t.selfcheck.FIRMWARE_ID){if("FW_REVISION"in t.sections.TSELFTEST.commands){var e=parseInt(t.selfcheck.FIRMWARE_ID.value),n=t.sections.TSELFTEST,r=n.commands.FW_REVISION;"value"in n&&"value"in r?d.apiGet(n.value,r.value,!0).then(function(t){e===t?(u(".kv-item-value.fw-revision").innerHTML=t.toString(10),m.OK()):m.ERROR("FW API revision is wrong")}).catch(function(t){m.ERROR("Unable to check FW API revision: "+t)}):m.ERROR("Unable to check FW API revision")}}else m.ERROR("Unable to check FW API revision")}),a()}}},{"../common/handler":5,"../common/state":10,"../utils/ajax":35,"../utils/helper":38}],17:[function(t,e,n){function r(t){var e=t.target,n=e.files[0];if(n.size>0){var r=e.parentNode,a=parseInt(r.getAttribute("section")),i=parseInt(r.getAttribute("command")),o=new FileReader;o.onload=function(t){d.fileUpload(a,i,t.target.result).then(function(){e.value=""}).catch(l.ERROR)},o.readAsArrayBuffer(n)}else l.ERROR("Empty file"),e.value="",c("#progress").classList.add("hidden")}function a(){for(var t=c(".file-controls");t.firstChild;)t.removeChild(t.firstChild);for(t.classList.add("hidden"),c('.tab-label[for="file-tab"]').classList.add("hidden"),t=c(".fav-menu[type=file]");t.firstChild;)t.removeChild(t.firstChild);for(t=c(".tab-menu[type=file]");t.firstChild;)t.removeChild(t.firstChild)}function i(t){var e=c(".tab-menu[type=file]"),n=c("#api-menu-item-template").content.querySelector(".section-link");for(var r in t)if(t.hasOwnProperty(r)){n.setAttribute("type","file"),n.setAttribute("search",r.toLowerCase().replace(/_/g," ")),n.setAttribute("section",r);var a=t[r];n.removeAttribute("title"),n.removeAttribute("tooltip"),"description"in a?n.setAttribute("tooltip",a.description):n.setAttribute("title",r),n.innerHTML=r,e.appendChild(n.cloneNode(!0))}}function o(t,e,n,a){var i=c("#file-transfer-ctrl-template").content.querySelector(".control-item"),o=i.querySelector(".star-button"),s=parseInt(e.value);i.setAttribute("display-text",n),i.setAttribute("section",a.toString()),i.setAttribute("command",s.toString()),i.setAttribute("search",n.toLowerCase().replace(/_/g," ")),o.setAttribute("fav-name",n);var l=i.cloneNode(!0),u=l.querySelector(".cmd-label");u.innerHTML=n,u.removeAttribute("title"),u.removeAttribute("tooltip"),"description"in e?u.setAttribute("tooltip",e.description):u.setAttribute("title",n),l.querySelector(".file-transfer-loader").addEventListener("change",r),t.appendChild(l)}function s(t,e){var n,r=c(".file-controls"),a=c("#api-section-template").content.querySelector(".section"),i=a.querySelector(".section-description"),s=a.querySelector("h3");for(var l in t)if(t.hasOwnProperty(l)){s.innerHTML=l,a.setAttribute("section",l),a.setAttribute("type","file");var u=t[l];"description"in u?(i.innerHTML=u.description,i.classList.remove("transparent-text")):(i.innerHTML=l,i.classList.add("transparent-text")),n=r.appendChild(a.cloneNode(!0)),i.innerHTML="",i.classList.add("transparent-text"),o(n,t[l],l,e)}}var l=t("../common/handler"),c=t("../utils/helper"),u=t("../common/state"),d=t("../utils/ajax"),p=t("../utils/file"),m=function(){return null===c("div.file-controls.hidden")};e.exports={loaded:function(){document.addEventListener("act-fw-api-loaded",function(){var t=u.api.get();if("file_transfer"in t&&"value"in t.file_transfer&&"types"in t.file_transfer){var e=t.file_transfer.types,n=parseInt(t.file_transfer.value);i(e),s(e,n),c('.tab-label[for="file-tab"]').classList.remove("hidden"),m()&&document.dispatchEvent(new Event("act-select-last-menu-item"))}}),document.addEventListener("act-fw-drop",a),document.addEventListener("click",function(t){if(0===t.button){var e,n=t.target;if(n.classList.contains("upload-file-button"))(e=n.parentNode).querySelector(".file-transfer-loader").click();else if(n.classList.contains("download-file-button")&&"file"===(e=n.parentNode).getAttribute("type")){var r=parseInt(e.getAttribute("section")),a=parseInt(e.getAttribute("command"));if(isNaN(r)||isNaN(a))return;d.fileDownload(r,a).then(function(t){var n=new Uint8Array(t.length);t.forEach(function(e,r){n[r]=t[r]}),p.save(e.getAttribute("display-text").toLowerCase()+".bin","application/octet-stream",n)}).catch(l.ERROR)}}})}}},{"../common/handler":5,"../common/state":10,"../utils/ajax":35,"../utils/file":37,"../utils/helper":38}],18:[function(t,e,n){var r=t("./types/uint"),a=t("./types/bit"),i=t("./types/enum");e.exports={display:function(t,e){switch(t.getAttribute("data-type")){case"uint":r.display(t,e);break;case"bit":a.display(t,e);break;case"enum":i.display(t,e)}setTimeout(function(){t.querySelector(".reload-button").classList.remove("reloading")},100)}}},{"./types/bit":19,"./types/enum":20,"./types/uint":21}],19:[function(t,e,n){var r=t("../../common/handler");e.exports={display:function(t,e){var n=parseInt(e);n<0||n>1?r.ERROR("Value "+n+" is not within range [0, 1] specified for "+t.getAttribute("display-text")):(t.querySelector("input.data-bit").checked=0!==n,r.OK())}}},{"../../common/handler":5}],20:[function(t,e,n){var r=t("../../common/handler");e.exports={display:function(t,e){for(var n,a=parseInt(e),i=t.querySelector(".enum-holder").querySelectorAll("input[type=radio]"),o=[],s=0,l=i.length;s<l;s++){n=i[s];var c=parseInt(n.getAttribute("value"));if(o.push(c),c===a)return n.checked=!0,void r.OK()}r.ERROR("Value "+a+" is not within enum "+JSON.stringify(o)+" specified for "+t.getAttribute("display-text"))}}},{"../../common/handler":5}],21:[function(t,e,n){var r=t("../../common/handler");e.exports={display:function(t,e){var n=parseInt(e),a=t.querySelector("input.data-range"),i=a.getAttribute("min"),o=a.getAttribute("max");if(n<i||o<n)r.ERROR("Value "+n+" is not within range ["+i+", "+o+"] specified for "+t.getAttribute("display-text"));else{a.value=n;var s=t.querySelector("input.val-text");s.classList.contains("hex")?s.value=n.toString(16):s.value=n.toString(10),r.OK()}}}},{"../../common/handler":5}],22:[function(t,e,n){function r(t,e){var n=e||w('.control-item[command="'+t+'"][type=hw]');return n?{type:n.getAttribute("reg-type"),offset:parseInt(n.getAttribute("offset")),size:parseInt(n.getAttribute("sz"))}:null}function a(t){return{command:t.getAttribute("command"),type:t.getAttribute("reg-type"),offset:parseInt(t.getAttribute("offset")),mask:parseInt(t.getAttribute("mask"))}}function i(t){var e=w('.control-item[command="'+t+'"]');if(R.elementIsVisible(e)){var n=r(t);n&&L.hwRead(t,n.type,n.offset,n.size).catch(T.ERROR)}}function o(t,e){if(t&&Array.isArray(e)){var n=w('.control-item[command="'+t+'"][type=hw]');if(n){var r=n.getAttribute("reg-type"),a=parseInt(n.getAttribute("offset"));if("a"===r||"l"===r)return L.hwWrite(t,r,a,e).catch(T.ERROR);var i=n.getAttribute("mask").split(",").map(f);return L.hwWrite(t,r,a,e,i).catch(T.ERROR)}}return Promise.resolve()}function s(t){var e={},n=t.match(I);if(n)e.start=parseInt(n[5]),e.stop=parseInt(n[4]),e.bits=e.stop-e.start+1;else if(n=t.match(C))e.stop=parseInt(n[4]);else if(!(n=t.match(k)))return T.ERROR("Invalid register address format: "+t),null;var r=parseInt(n[1],16),a=parseInt(n[2],16),i=parseInt(n[3],16);return e.offset=((127&r)<<15)+(a<<7)+(127&i),e}function l(){var t=w.$(".control-item[multi][type=hw]"),e=new Set;Array.prototype.slice.call(t).forEach(function(t){e.add(t.getAttribute("multi"))}),e.forEach(function(t){var e=w.$('.control-item[multi="'+t+'"][type=hw]'),n=e.length;if(n<1)T.ERROR("Bad multi-byte "+t);else{for(var r,a,i=0,o=[],s={},l=0;l<n;l++)a=(r=e[l]).getAttribute("offset"),o.push(parseInt(a)),s[a]=r,i+=parseInt(r.getAttribute("bits"));var c=o.sort(function(t,e){return t-e}),u="",d="",p="";for(l=0;l<n;l++)l>0&&(u+=",",d+=",",p+=","),u+=(r=s[c[l]]).getAttribute("mask"),d+=r.getAttribute("low"),p+=r.getAttribute("high"),l>0&&(r.parentNode.removeChild(r),delete s[c[l]]);var m=Math.pow(2,i)-1,f=s[c[0]];f.setAttribute("command",t),f.setAttribute("sz",n),f.setAttribute("bits",i.toString()),f.setAttribute("mask",u),f.setAttribute("low",d),f.setAttribute("high",p),f.setAttribute("max",m.toString()),f.querySelector(".data-range").setAttribute("max",m.toString()),f.querySelector(".bit-hint").innerHTML=i.toString();var v=t.replace(/[_\s\/]/g,"-").toLowerCase();f.querySelector(".val-text").setAttribute("id",v);var h=f.querySelector(".cmd-label");h.querySelector(".byte-hint").innerHTML=i+" bits of "+n+" bytes";var g=h.querySelector(".cmd-show");g.innerHTML=t.split("/").pop(),g.setAttribute("for",v)}})}function c(){var t=w.$(".control-item[multi][type=hw]"),e=new Set;Array.prototype.slice.call(t).forEach(function(t){var n=t.getAttribute("multi");e.add(n)}),e.forEach(function(t){for(var e,n,r,a,i,o,s,l,c,u=w('.control-item[multi="'+t+'"][type=hw]'),d=u.getAttribute("mask").split(",").map(f),p=u.getAttribute("low").split(",").map(f),m=u.getAttribute("high").split(",").map(f),v=parseInt(u.getAttribute("offset")),h=d.length,g=0;g<h;g++){i=d[g],o=p[g],c=(s=m[g])-o+1,n=(e=t+" ("+(s+(l=8*g))+":"+(o+l)+")").split("/").pop(),(r=u.cloneNode(!0)).setAttribute("command",e),r.setAttribute("mask",i.toString()),r.setAttribute("offset",(v+g).toString()),r.setAttribute("sz","1"),r.setAttribute("low",o.toString()),r.setAttribute("high",s.toString()),r.setAttribute("bits",c.toString()),r.setAttribute("max",((1<<c)-1).toString());for(var b=(a=r.querySelector(".cmd-label")).querySelector(".byte-hint");b.firstChild;)b.removeChild(b.firstChild);var y=e.replace(/[_\s\/\(\):]/g,"-").toLowerCase(),A=a.querySelector(".cmd-show");A.innerHTML=n,A.setAttribute("for",y),r.querySelector(".data-range").setAttribute("max",i.toString()),r.querySelector(".bit-hint").innerHTML=c.toString(),r.querySelector(".val-text").setAttribute("id",y),u.parentNode.insertBefore(r,u)}u.parentNode.removeChild(u)})}function u(t){var e=s(t.getAttribute("data-address"));if(e)if(t.setAttribute("offset",e.offset),t.removeAttribute("data-address"),"WO"!==t.getAttribute("data-mode")||R.supportWORegisters()){var n=t.getAttribute("data-type"),r=t.getAttribute("command");t.setAttribute("search",r.split("/").pop().toLowerCase()),q.createButtons(t);var a=t.querySelector(".star-button");switch(a&&a.setAttribute("fav-name",r.toLowerCase()),n){case"bit":t.setAttribute("reg-type","r"),t.setAttribute("mask",(1<<e.stop).toString());break;case"byte":t.setAttribute("reg-type","r"),t.setAttribute("low",e.start),t.setAttribute("high",e.stop),t.setAttribute("mask",((1<<e.stop+1)-(1<<e.start)).toString());break;case"array":case"lut":t.setAttribute("reg-type","a");break;default:return T.ERROR("Unknown data type "+n+" for register "+r),void t.classList.add("bad-register")}if("bit"===n)t.setAttribute("sz","1");else if("byte"===n){t.setAttribute("bits",e.bits),t.setAttribute("sz","1"),t.setAttribute("max",((1<<parseInt(e.bits))-1).toString());var i=r.match(P);if(i&&2===i.length){var o=i[1];t.setAttribute("multi",o);var l=o.toLowerCase();a&&a.setAttribute("fav-name",l),t.setAttribute("search",l.split("/").pop())}}else if("array"===n||"lut"===n){var c=t.hasAttribute("table-bits")?t.getAttribute("table-bits"):"8",u=t.hasAttribute("table-align")?t.getAttribute("table-align").substring(2):"8",d=t.hasAttribute("data-nodes")?t.getAttribute("data-nodes"):"1",p=t.hasAttribute("arrangement")?t.getAttribute("arrangement"):"1x"+d,m=parseInt(Math.floor(parseInt(u)*parseInt(d)/8));if(t.setAttribute("bits",c),t.setAttribute("align",u),t.setAttribute("nodes",d),t.setAttribute("sz",m.toString()),t.setAttribute("max",(Math.pow(2,parseInt(c))-1).toString()),t.setAttribute("arrangement",p),"WO"===t.getAttribute("data-mode")&&null===t.querySelector(".array-cell")){for(var f=t.querySelector(".array-table"),v=w("#array-cell-template").content.querySelector("li"),h=parseInt(t.getAttribute("nodes")),g=0,b=document.createDocumentFragment();g<h;)v.innerHTML=0,v.setAttribute("tooltip",g+"-th element"),v.setAttribute("index",g.toString()),v.style.width="4ex",b.appendChild(v.cloneNode(!0)),g++;f.appendChild(b)}}t.removeAttribute("table-align"),t.removeAttribute("table-bits"),t.removeAttribute("data-nodes")}else t.classList.add("bad-register");else t.classList.add("bad-register")}function d(t){var e=t.getAttribute("data-type");if("byte"===e){var n=t.querySelector(".data-range[type=range]"),r=t.getAttribute("max");n&&n.setAttribute("max",r);var a=t.querySelector(".bit-hint");a&&(a.innerHTML=t.getAttribute("bits"))}else"array"!==e&&"lut"!==e||(t.querySelector(".bit-hint").innerHTML=t.getAttribute("bits"))}function p(t){[].forEach.call(t.querySelectorAll(".bad-register"),function(t){t.parentNode.removeChild(t)})}function m(t){var e=t.querySelectorAll(".control-item[type=hw]");Array.prototype.slice.call(e).forEach(function(t){u(t),d(t)}),p(t)}function f(t){return parseInt(t)}function v(t,e,n){var r=parseInt(t);if(isNaN(r)||e.length!==n)return Array.apply(null,new Array(n)).map(Number.prototype.valueOf,0);for(var a,i,o,s=[],l=0;l<n;l++)a=e[l],o=8*l,i=(r&Math.pow(2,o+8)-1)>>>o,s.push(i&a);return s}function h(t,e){var n,r=e.getAttribute("command"),a=parseInt(e.getAttribute("sz")),i=parseInt(t.value,t.classList.contains("hex")?16:10);if(1===a){var s=parseInt(e.getAttribute("low"));n=parseInt(e.getAttribute("mask")),s>0&&(i<<=s),o(r,[i&n]).catch(T.ERROR)}else o(r,v(i,n=e.getAttribute("mask").split(",").map(f),a)).catch(T.ERROR);var l=e.querySelector(".reload-button");l.classList.contains("disabled")||(l.classList.add("reloading"),setTimeout(function(){l.classList.remove("reloading")},32e3))}function g(t,e,n){var r=w('.control-item[command="'+t+'"][type=hw]');if(r){var a=r.getAttribute("data-type");if("byte"===a||"bit"===a)return n(r,a,e,r.getAttribute("mask").split(",").map(f));if("array"===a||"lut"===a)return n(r,a,e,null,parseInt(r.getAttribute("bits")),parseInt(r.getAttribute("align")))}}function b(t){R.allowRequests();var e,n=!0;e={detail:"Please wait while operation completes"},document.dispatchEvent(new CustomEvent("act-popup-progress",e));var r,i=Array.prototype.slice.call(w.$('.control-item[type=hw][command$="/MCU priority"]')),o=i.map(function(t){return t.querySelector(".data-bit").checked}),s=i.map(function(t){var e=a(t);return L.hwWrite(e.command,e.type,e.offset,[255],[e.mask])});Promise.all(s).then(function(){if(R.requestsPrevented())return Promise.reject(new Error("Request was cancelled"));var e=S.defer(),n=w("#modal-progress"),r=O(M);return r.onmessage=function(t){var a=t.data;a.error?(r.terminate(),n.value=0,e.reject(a.error)):a.done?(n.value=0,e.resolve(a.results)):n.value<a.progress&&(n.value=a.progress)},r.onerror=function(t){e.reject(t.message),n.value=0},n.value=0,n.max=t.length,r.postMessage({base:document.domain+":"+location.port,commands:t}),e.promise}).then(function(t){if(R.requestsPrevented());else{var e=t.map(function(t){return{name:t.name,value:g(t.name,t.bytes,N.comprehend)}});x.save("settings.json","application/json",e)}}).catch(function(t){r={detail:{message:t}},document.dispatchEvent(new CustomEvent("act-popup-log",r)),T.ERROR(t),n=!1}).then(function(){i.map(function(t,e){var n=a(t);L.hwWrite(n.command,n.type,n.offset,o[e]?[255]:[0],[n.mask])})}).catch(function(t){r={detail:{message:"Error: "+t}},document.dispatchEvent(new CustomEvent("act-popup-log",r)),T.ERROR(t),n=!1}).then(function(){n&&document.dispatchEvent(new Event("act-cover-progress"))})}function y(t){var e=t.getAttribute("command");"WO"!==t.getAttribute("data-mode")&&(i(e),t.querySelector(".reload-button").classList.add("reloading"),setTimeout(function(){t.querySelector(".reload-button").classList.remove("reloading")},32e3))}function A(t){var e=t.querySelectorAll(".control-item:not(.hidden)");Array.prototype.slice.call(e).forEach(y)}var w=t("../utils/helper"),S=t("../utils/promise"),L=t("../utils/ajax"),E=t("../utils/calc"),x=t("../utils/file"),R=t("../common/state"),q=t("../common/buttons"),N=t("../hw/types"),T=t("../common/handler"),I=/^\(([a-f\d]+)=([a-f\d]+)\)([a-f\d]+)\.([0-7]):([0-7])$/i,C=/^\(([a-f\d]+)=([a-f\d]+)\)([a-f\d]+)\.([0-7])$/i,k=/^\(([a-f\d]+)=([a-f\d]+)\)([a-f\d]+)$/i,O=t("../lib/webworkify"),M=t("../workers/rhr"),P=/(.*) \(\d+:\d+\)$/;e.exports={loaded:function(){function t(t){return new Promise(function(e){setTimeout(e,t)})}var e=w.$(".section[type=hw]");Array.prototype.slice.call(e).forEach(function(t){m(t)}),document.addEventListener("click",function(t){if(0===t.button){var e,n,r=t.target;if(r.classList.contains("reload-button")){if("hw"===(n=r.closest(".control-item")).getAttribute("type"))if(t.shiftKey)(e={}).detail={control:n,type:"hw"},document.dispatchEvent(new CustomEvent("act-polling",e));else{if(r.classList.contains("reloading")||r.classList.contains("polling"))return;var a=r.closest(".control-item");i(n.getAttribute("command")),r.classList.add("reloading"),setTimeout(function(){r.classList.remove("reloading")},32e3);var s;s={detail:{ctrl:a}},document.dispatchEvent(new CustomEvent("refresh-graph",s))}}else r.classList.contains("data-bit")?"hw"===(n=r.closest(".control-item")).getAttribute("type")&&(o(n.getAttribute("command"),r.checked?[255]:[0]).catch(T.ERROR),n.querySelector(".reload-button").classList.add("reloading"),setTimeout(function(){n.querySelector(".reload-button").classList.remove("reloading")},32e3)):r.classList.contains("cancel-progress-btn")&&(R.preventRequests(),document.dispatchEvent(new Event("act-cover-progress")))}}),document.addEventListener("input",function(t){var e=t.target,n=e.parentNode;e.classList.contains("data-range")&&"hw"===n.getAttribute("type")&&h(e,n)}),document.addEventListener("keypress",function(t){var e=t.target,n=t.keyCode||t.which;if(e.classList.contains("val-text")){var r=e.parentNode;"hw"===r.getAttribute("type")&&13===n&&(h(e,r),e.setAttribute("original-value",e.value))}}),document.addEventListener("focus",function(t){var e=t.target;"classList"in e&&e.classList.contains("val-text")&&e.setAttribute("original-value",e.value)},!0),document.addEventListener("blur",function(t){var e=t.target;if("classList"in e&&e.classList.contains("val-text")){var n=e.parentNode;if("hw"===n.getAttribute("type")&&e.hasAttribute("original-value")){var r=e.classList.contains("hex")?16:10,a=parseInt(e.value,r);parseInt(e.getAttribute("original-value"),r)!==a&&h(e,n),e.removeAttribute("original-value")}}},!0),document.addEventListener("act-hw-value-changed",function(t){var e=t.detail,n=e.command,r=w('.control-item[command="'+n+'"]');if(R.elementIsVisible(r)){var a=e.bytes;n&&Array.isArray(a)&&g(n,a,N.display)}}),document.addEventListener("act-combine-hw-bytes",l),document.addEventListener("act-split-hw-bytes",c),document.addEventListener("act-reload-visible",function(){var t=w.$(".section:not(.hidden)[type=hw]");Array.prototype.slice.call(t).forEach(A)}),document.addEventListener("act-save-visible-hw-registers",function(){var t=[];Array.prototype.slice.call(w.$(".section:not(.hidden)[type=hw]")).forEach(function(e){Array.prototype.push.apply(t,Array.prototype.slice.call(e.querySelectorAll('.control-item:not(.hidden)[type=hw].control-item:not([data-mode="WO"])')))}),b(t.map(function(t){var e=t.getAttribute("command"),n=r(e,t);return n.name=e,n}))}),document.addEventListener("act-save-hw-registers",function(){b(Array.prototype.slice.call(w.$('.control-item[type=hw].control-item:not([data-mode="WO"])')).map(function(t){var e=t.getAttribute("command"),n=r(e,t);return n.name=e,n}))}),document.addEventListener("act-load-hw-registers",function(t){var e,n=!0;R.allowRequests();var r=t.detail;if(Array.isArray(r)){var i;i={detail:"Please wait while operation completes"},document.dispatchEvent(new CustomEvent("act-popup-progress",i));var s=w("#modal-progress");s.value=0,s.max=r.length;var l=Array.prototype.slice.call(w.$('.control-item[type=hw][command$="/MCU priority"]')),c=l.map(function(t){return t.querySelector(".data-bit").checked}),u=l.map(function(t){var e=a(t);return L.hwWrite(e.command,e.type,e.offset,[255],[e.mask])});Promise.all(u).then(function(){if(R.requestsPrevented())return Promise.reject(new Error("Request was cancelled"));var t=r.map(function(t,e){return Promise.resolve().then(function(){var e=t.name;if(e.includes("/MCU priority"))return Promise.resolve();var n=w('.control-item[command="'+e+'"][type=hw]'),r=n.getAttribute("data-mode");if(n&&"RW"===r)switch(n.getAttribute("data-type")){case"bit":return o(e,t.value?[255]:[0]);case"byte":var a=parseInt(n.getAttribute("sz"));if(1===a){var i=parseInt(n.getAttribute("low"));return o(e,[(i>0?t.value<<i:t.value)&parseInt(n.getAttribute("mask"))])}var s=n.getAttribute("mask").split(",").map(f);return o(e,v(t.value,s,a));case"array":case"lut":var l=parseInt(n.getAttribute("bits")),c=parseInt(n.getAttribute("align")),u=n.getAttribute("reg-type"),d=parseInt(n.getAttribute("offset"));return L.hwWrite(e,u,d,E.arrayToBytes(t.value,l,c)).catch(T.ERROR);default:return Promise.resolve()}return Promise.resolve()}).then(function(){s.value<e&&(s.value=e)})});return Promise.all(t)}).catch(function(t){e={detail:{message:"ERROR:"+t}},document.dispatchEvent(new CustomEvent("act-popup-log",e)),T.ERROR(t),n=!1}).then(function(){l.map(function(t,e){var n=a(t);L.hwWrite(n.command,n.type,n.offset,c[e]?[255]:[0],[n.mask])})}).catch(function(t){e={detail:{message:"ERROR:"+t}},document.dispatchEvent(new CustomEvent("act-popup-log",e)),T.ERROR(t),n=!1}).then(function(){n&&document.dispatchEvent(new Event("act-cover-progress"))})}}),document.addEventListener("act-load-hw-registers-staggered",function(e){var n,r=parseInt(R.getHWLoadDelay()),i=!0;R.allowRequests();var s=e.detail;if(Array.isArray(s)){var l;l={detail:"Please wait while operation completes"},document.dispatchEvent(new CustomEvent("act-popup-progress",l));var c=w("#modal-progress");c.value=0,c.max=s.length;var u=Array.prototype.slice.call(w.$('.control-item[type=hw][command$="/MCU priority"]')),d=u.map(function(t){return t.querySelector(".data-bit").checked});u.reduce(function(e,n){return e.then(function(){return R.requestsPrevented()?Promise.reject(new Error("Request was cancelled")):L.hwWrite(n.getAttribute("command"),n.getAttribute("reg-type"),parseInt(n.getAttribute("offset")),[255],[parseInt(n.getAttribute("mask"))]).then(function(){t(r)})})},Promise.resolve()).then(function(){var e,l,p,m,h=0;s.reduce(function(n,a){return n.then(function(){if(R.requestsPrevented())return Promise.reject(new Error("Request was cancelled"));if(e=a.name,(l=w('.control-item[command="'+e+'"][type=hw]'))&&(p=l.getAttribute("data-mode"),!e.includes("/MCU priority")&&"RW"===p))if("bit"===(m=l.getAttribute("data-type")))o(e,a.value?[255]:[0]);else if("byte"===m){var n=parseInt(l.getAttribute("sz"));if(1===n){var i=parseInt(l.getAttribute("low")),s=i>0?a.value<<i:a.value;return o(e,[s&parseInt(l.getAttribute("mask"))])}var u=l.getAttribute("mask").split(",").map(f);o(e,v(a.value,u,n))}else if("array"===m||"lut"===m){var d=parseInt(l.getAttribute("bits")),g=parseInt(l.getAttribute("align")),b=l.getAttribute("reg-type"),y=parseInt(l.getAttribute("offset"));L.hwWrite(e,b,y,E.arrayToBytes(a.value,d,g))}return h++,c.value<h&&(c.value=h),t(r)})},Promise.resolve()).then(function(){h=0,u.reduce(function(e,n){return e.then(function(){if(R.requestsPrevented())return Promise.reject(new Error("Request was cancelled"));var e=a(n);return L.hwWrite(e.command,e.type,e.offset,d[h]?[255]:[0],[e.mask]).then(function(){return t(r)})})},Promise.resolve()).then(function(){i&&document.dispatchEvent(new Event("act-cover-progress"))})}).catch(function(t){n={detail:{message:"ERROR:"+t}},document.dispatchEvent(new CustomEvent("act-popup-log",n)),T.ERROR(t),i=!1})})}}),w("#combine-multi-bytes").checked&&l()}}},{"../common/buttons":1,"../common/handler":5,"../common/state":10,"../hw/types":23,"../lib/webworkify":27,"../utils/ajax":35,"../utils/calc":36,"../utils/file":37,"../utils/helper":38,"../utils/promise":40,"../workers/rhr":41}],23:[function(t,e,n){var r=t("./types/bit"),a=t("./types/byte"),i=t("./types/array");e.exports={display:function(t,e,n,o,s,l){switch(e){case"bit":r.display(t,n,o);break;case"byte":a.display(t,n,o);break;case"array":case"lut":i.display(t,n,s,l)}setTimeout(function(){t.querySelector(".reload-button").classList.remove("reloading")},100)},comprehend:function(t,e,n,o,s,l){switch(e){case"bit":return r.comprehend(n,o);case"byte":return a.comprehend(n,o);case"array":case"lut":return i.comprehend(n,s,l);default:return}}}},{"./types/array":24,"./types/bit":25,"./types/byte":26}],24:[function(t,e,n){function r(t,e){return e%8!=0||e<0||!!(t>e||t<0)}var a=t("../../utils/helper"),i=t("../../utils/calc"),o=t("../../common/handler");e.exports={display:function(t,e,n,s){if(r(n,s))o.ERROR("Bad array bits or align for "+t.getAttribute("display-text"));else{var l=t.querySelector(".array-table"),c=document.createDocumentFragment();if(l){for(var u=e.length,d=Math.pow(2,n)-1,p=d;l.firstChild;)l.removeChild(l.firstChild);l.setAttribute("max",p.toString());for(var m,f=l.classList.contains("hex")?16:10,v=a("#array-cell-template").content.querySelector("li"),h=p.toString(f).length+1+"ex",g=s>>>3,b=parseInt(t.getAttribute("sz")),y=0,A=0;y<u&&A<b;y+=g)m=i.bytesToItem2(e,d,s,y),v.innerHTML=m.toString(f),v.setAttribute("tooltip",A+"-th element"),v.setAttribute("index",A.toString()),v.style.width=h,c.appendChild(v.cloneNode(!0)),A++;l.appendChild(c),o.OK()}}},comprehend:function(t,e,n){return r(e,n)?void 0:i.bytesToArray(t,e,n)||void 0}}},{"../../common/handler":5,"../../utils/calc":36,"../../utils/helper":38}],25:[function(t,e,n){function r(t,e){return 0!=(t[0]&e[0])?1:0}var a=t("../../common/handler");e.exports={display:function(t,e,n){if(1===e.length&&1===n.length){var i=t.querySelector("input.data-bit");i&&(i.checked=r(e,n)),a.OK()}else a.ERROR("Size mismatch for "+t.getAttribute("display-text"))},comprehend:function(t,e){return 1===t.length&&1===e.length?r(t,e):void 0}}},{"../../common/handler":5}],26:[function(t,e,n){function r(t,e,n){for(var r,a,i=0,o=0;o<n;o++){if(r=parseInt(t[o]),a=parseInt(e[o]),isNaN(r)||isNaN(a))return NaN;i+=(r&a)/(a&-a)<<8*o}return i>>>0}var a=t("../../common/handler");e.exports={display:function(t,e,n){var i=e.length;if(i===n.length&&i>0){var o=r(e,n,i),s=t.querySelector("input.data-range"),l=t.querySelector("input.val-text");if(isNaN(o))return s&&(s.value=0),l&&(l.value="0"),void a.ERROR("Bad value for "+t.getAttribute("display-text"));var c=t.getAttribute("max");o<0||o>c?a.ERROR("Value "+o+" exceeds "+c+" for "+t.getAttribute("display-text")):(s&&(s.value=o),l&&(l.classList.contains("hex")?l.value=o.toString(16):l.value=o.toString(10)))}else a.ERROR("Size mismatch for "+t.getAttribute("display-text"))},comprehend:function(t,e){var n=t.length;if(n===e.length&&n>0){var a=r(t,e,n);return isNaN(a)?void 0:a}}}},{"../../common/handler":5}],27:[function(t,e,n){var r=arguments[3],a=arguments[4],i=arguments[5],o=JSON.stringify;e.exports=function(t,e){function n(t){h[t]=!0;for(var e in a[t][1]){var r=a[t][1][e];h[r]||n(r)}}for(var s,l=Object.keys(i),c=0,u=l.length;c<u;c++){var d=l[c],p=i[d].exports;if(p===t||p&&p.default===t){s=d;break}}if(!s){s=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var m={},c=0,u=l.length;c<u;c++)m[d=l[c]]=d;a[s]=[Function(["require","module","exports"],"("+t+")(self)"),m]}var f=Math.floor(Math.pow(16,8)*Math.random()).toString(16),v={};v[s]=s,a[f]=[Function(["require"],"var f = require("+o(s)+");(f.default ? f.default : f)(self);"),v];var h={};n(f);var g="("+r+")({"+Object.keys(h).map(function(t){return o(t)+":["+a[t][0]+","+o(a[t][1])+"]"}).join(",")+"},{},["+o(f)+"])",b=window.URL||window.webkitURL||window.mozURL||window.msURL,y=new Blob([g],{type:"text/javascript"});if(e&&e.bare)return y;var A=b.createObjectURL(y),w=new Worker(A);return w.objectURL=A,w}},{}],28:[function(t,e,n){function r(){var t="act/3.2/settings/http-timeout",e=localStorage[t];return void 0===e?(window.__http__timeout=3e5,localStorage[t]=3e5):window.__http__timeout=parseInt(e),Promise.resolve()}function a(){Promise.resolve().then(r).then(o.loaded).then(s.loaded).then(m.loaded).then(c.loaded).then(u.loaded).then(d.loaded).then(v.loaded).then(h.loaded).then(g.loaded).then(b.loaded).then(y.loaded).then(A.loaded).then(w.loaded).then(S.loaded).then(L.loaded).then(E.loaded).then(l.loaded).then(p.loaded).then(function(){return c.returnToPreviouslySelectedTab(),i.get("/version").then(function(t){document.querySelector("#acs-ver").innerHTML=t.version})}).then(f.loaded).catch(o.ERROR)}t("./fixme"),t("./polyfill");var i=t("./utils/ajax"),o=t("./common/handler"),s=t("./common/search"),l=t("./common/viewer"),c=t("./common/tabs"),u=t("./common/polling"),d=t("./common/popup"),p=t("./common/fav"),m=t("./common/menu"),f=t("./common/graphs"),v=t("./ui/splitter"),h=t("./ui/footer"),g=t("./ui/tooltip"),b=t("./ui/settings"),y=t("./ui/options"),A=t("./hw/registers"),w=t("./fw/calibrations"),S=t("./fw/transfer"),L=t("./fw/api"),E=t("./fw/commands");document.addEventListener("act-init-am",function(t){var e=t.detail.defer,n=document.querySelector('.control-item[command="cmd queues/Data"][type=hw]'),r=document.querySelector('.control-item[command="System/Debug 0"][type=hw]'),a=null,o=null,s=null;n&&(a=parseInt(n.getAttribute("offset")),o=parseInt(n.getAttribute("sz"))),r&&(s=parseInt(r.getAttribute("offset"))),i.initAM(s,a,o).then(e.resolve).catch(e.reject)}),"complete"===document.readyState||"interactive"===document.readyState?a():document.addEventListener("DOMContentLoaded",a)},{"./common/fav":2,"./common/graphs":4,"./common/handler":5,"./common/menu":6,"./common/polling":7,"./common/popup":8,"./common/search":9,"./common/tabs":11,"./common/viewer":12,"./fixme":13,"./fw/api":14,"./fw/calibrations":15,"./fw/commands":16,"./fw/transfer":17,"./hw/registers":22,"./polyfill":29,"./ui/footer":30,"./ui/options":31,"./ui/settings":32,"./ui/splitter":33,"./ui/tooltip":34,"./utils/ajax":35}],29:[function(t,e,n){String.prototype.includes||(String.prototype.includes=function(){"use strict";return-1!==String.prototype.indexOf.apply(this,arguments)}),String.prototype.padLeft||(String.prototype.padLeft=function(){"use strict";var t=arguments[0];if("string"==typeof t){if(null===this||void 0===this)return t;var e=t.length;return(t+this).slice(-e)}return this}),String.prototype.padRight||(String.prototype.padRight=function(){"use strict";var t=arguments[0];if("string"==typeof t){if(null===this||void 0===this)return t;var e=t.length;return(this+t).substring(0,e)}return this}),String.prototype.endsWith||(String.prototype.endsWith=function(t,e){var n=this.toString(),r=e;(void 0===e||e>n.length)&&(r=n.length),r-=t.length;var a=n.indexOf(t,r);return-1!==a&&a===r}),String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.contains=function(t){return this.indexOf(t)>=0},Math.log2=Math.log2||function(t){return Math.log(t)/Math.LN2}},{}],30:[function(t,e,n){e.exports={loaded:function(){return document.addEventListener("click",function(t){0===t.button&&t.target.classList.contains("footer-link")&&document.dispatchEvent(new Event("act-popup-errors"))}),Promise.resolve()}}},{}],31:[function(t,e,n){function r(){}function a(t){return function(e){e.lengthComputable&&(t.value=e.loaded/e.total*100)}}function i(){document.dispatchEvent(new Event("act-fw-drop")),setTimeout(function(){m.setSelectedTab("hw"),setTimeout(p.returnToPreviouslySelectedTab,50)},100)}function o(){d("#file-upload-input").click()}function s(){m.clear(),document.dispatchEvent(new Event("act-clear-user-data"))}function l(){var t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept",".xml"),t.value=null,t.addEventListener("change",function(){var t=this.files[0];if("text/xml"===t.type&&t.size>0){var e=d("#progress");e.classList.remove("hidden"),f.upload("/xml",t,a(e)).then(function(){return document.dispatchEvent(new Event("act-fw-drop")),Promise.resolve()}).then(function(){setTimeout(function(){window.location.reload(!0)},400)}).catch(function(t){v.ERROR(t)}).then(function(){e.classList.add("hidden")})}else v.ERROR("Wrong type of file"),d("#progress").classList.add("hidden")}),t.click()}function c(){var t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept",".json"),t.value=null,t.addEventListener("change",function(){var t=this.files[0];if(t.name.endsWith(".json")&&t.size>0){var e=new FileReader;e.onload=function(t){try{var e;e={detail:JSON.parse(t.target.result.toString())},document.dispatchEvent(new CustomEvent("act-load-hw-registers",e))}catch(t){v.ERROR("Bad JSON file")}},e.readAsText(t)}else v.ERROR("Wrong type of file")}),t.click()}function u(){var t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept",".json"),t.value=null,t.addEventListener("change",function(){var t=this.files[0];if(t.name.endsWith(".json")&&t.size>0){var e=new FileReader;e.onload=function(t){try{var e;e={detail:JSON.parse(t.target.result.toString())},document.dispatchEvent(new CustomEvent("act-load-hw-registers-staggered",e))}catch(t){v.ERROR("Bad JSON file")}},e.readAsText(t)}else v.ERROR("Wrong type of file")}),t.click()}var d=t("../utils/helper"),p=t("../common/tabs"),m=t("../common/state"),f=t("../utils/ajax"),v=t("../common/handler");e.exports={loaded:function(){return d("#combine-multi-bytes").addEventListener("click",function(){this.checked?document.dispatchEvent(new Event("act-combine-hw-bytes")):document.dispatchEvent(new Event("act-split-hw-bytes")),"hw"===p.getCurrentlySelectedTabType()&&document.dispatchEvent(new Event("act-reload-visible"))}),d("#options-menu-button").addEventListener("click",function(t){0===t.button&&(t.target.classList.toggle("activated"),d("#options-menu").classList.toggle("hidden"))}),d("#file-upload-input").addEventListener("change",function(){var t=this.files[0];if(t.name.endsWith(".json")&&t.size>0){var e=d("#progress");e.classList.remove("hidden"),f.upload("/api",t,a(e)).then(function(){setTimeout(function(){window.location.reload(!0)},200)}).catch(function(t){v.ERROR(t)}).then(function(){e.classList.add("hidden")})}else v.ERROR("Wrong type of file"),d("#progress").classList.add("hidden")}),document.addEventListener("click",function(t){function e(){d("#options-menu").classList.add("hidden"),d("#options-menu-button").classList.remove("activated")}if(0===t.button){var n=t.target;if(n.classList.contains("ask-opt-menu-item")){e();var a;switch(a={},n.id){case"drop-fw-api":a.detail={question:"Erase loaded FW API settings?",yes:i,no:r};break;case"clear-user-data":a.detail={question:"Erase all local settings?",yes:s,no:r}}a&&document.dispatchEvent(new CustomEvent("act-ask-user",a))}else if(n.classList.contains("opt-menu-item"))switch(e(),n.id){case"open-settings":document.dispatchEvent(new Event("act-popup-settings"));break;case"about-act":document.dispatchEvent(new Event("act-popup-about"));break;case"save-hw-registers":document.dispatchEvent(new Event("act-save-hw-registers"));break;case"save-api-values":document.dispatchEvent(new Event("act-save-api-values"));break;case"save-visible-api-values":document.dispatchEvent(new Event("act-save-visible-api-values"));break;case"save-visible-hw-registers":document.dispatchEvent(new Event("act-save-visible-hw-registers"));break;case"load-hw-registers":c();break;case"load-hw-registers-staggered":u();break;case"reload-fw-api":o();break;case"upload-xml":l()}else if(n.classList.contains("opt-menu-link")){e();var p=n.getAttribute("target");window.open(p,"_blank").focus()}}}),Promise.resolve()}}},{"../common/handler":5,"../common/state":10,"../common/tabs":11,"../utils/ajax":35,"../utils/helper":38}],32:[function(t,e,n){function r(t){var e=t.target;if(e.classList&&e.classList.contains("config")){var n=e.id.substring(4);if("boolean"===e.getAttribute("cfg-type"))a.setSetting(n,e.checked);else if("number"===e.getAttribute("cfg-type")){var r=parseInt(e.value),s=parseInt(e.getAttribute("cfg-min")),l=parseInt(e.getAttribute("cfg-max"));isNaN(r)||r>l||r<s?o=!0:(o=!1,a.setSetting(n,r)),o?i.ERROR("bad value for setting "+n):i.OK()}}}var a=t("../common/state"),i=t("../common/handler"),o=!1;e.exports={loaded:function(){return document.addEventListener("click",r),document.addEventListener("keyup",r),Promise.resolve()}}},{"../common/handler":5,"../common/state":10}],33:[function(t,e,n){var r=t("../utils/helper"),a=function(){};a.menu=null,a.drag=function(t){t.clientX>199&&t.clientX<501&&(a.splitter.style.left=t.clientX+"px",a.handle.style.left=t.clientX+3+"px",a.content.style.left=Math.max(t.clientX,a.content.style["min-width"])+5+"px",a.menu.style.width=Math.max(t.clientX,a.menu.style["min-width"])+"px")},a.stop=function(){window.removeEventListener("mousemove",a.drag),window.removeEventListener("mouseup",a.stop)},e.exports={loaded:function(){return a.menu=r(".left-pane"),a.splitter=r("div.splitter"),a.handle=r("div.handle"),a.content=r(".content"),r("div.splitter").addEventListener("mousedown",function(t){0===t.button&&(t.preventDefault(),window.addEventListener("mousemove",a.drag),window.addEventListener("mouseup",a.stop))}),document.addEventListener("click",function(t){if(0===t.button&&t.target.classList.contains("handle")){var e=r(".left-pane.hidden"),n=r(".splitter"),a=r(".handle"),i=r(".content");e?(e.classList.remove("hidden"),e.style.width="200px",i.style.left="205px",a.style.left="203px",n.style.left="200px",n.classList.remove("hidden"),n.style.left="200px"):(r(".left-pane").classList.add("hidden"),i.style.left="5px",a.style.left="0px",n.classList.add("hidden"))}}),Promise.resolve()}}},{"../utils/helper":38}],34:[function(t,e,n){e.exports={loaded:function(){var t=document.querySelector(".main"),e=document.querySelector(".tooltip"),n=null,r=null,a=0,i=0;return document.addEventListener("mousemove",function(o){var s=o.target;if("hasAttribute"in s)if(s.hasAttribute("tooltip")){n&&clearTimeout(n),n=setTimeout(function(){e.classList.add("hidden")},1e4);var l=parseInt(o.clientX),c=parseInt(o.clientY),u=Math.abs(l-a),d=Math.abs(c-i);if(u*u+d*d<64)return;a=l,i=c,e.innerHTML=s.getAttribute("tooltip"),r&&clearTimeout(r),r=setTimeout(function(){e.classList.remove("hidden")},500);var p=parseInt(t.offsetWidth),m=parseInt(t.offsetHeight),f=parseInt(e.offsetWidth),v=parseInt(e.offsetHeight);l+f>p&&(l=p-f-20),c+v>m&&(c=m-v-20),e.style.left=l+"px",e.style.top=c+"px"}else s.classList.contains("hidden")||(e.classList.add("hidden"),a=0,i=0,r&&clearTimeout(r))}),Promise.resolve()}}},{}],35:[function(t,e,n){function r(t){var e,n="",r=!0;for(var a in t)if(t.hasOwnProperty(a)){if(null===(e=t[a])||void 0===e)continue;switch(r?r=!1:n+=";",typeof e){case"string":n+='"'+a+'":"'+e+'"';break;case"number":if(isNaN(e))continue;n+='"'+a+'":'+e.toString();break;case"object":if(Array.isArray(e)){var i=JSON.stringify(e);n+='"'+a+'"#'+(i=i.substring(1,i.length-1))}break;case"boolean":n+='"'+a+'":'+(e?"t":"f")}}return n}function a(t,e,n){var r=i.defer();return o.POST(t,e,function(a,s){if(a)r.reject(a);else{var l=s[0],c=s[1];if(200===l||202===l)try{var u=s[2];0===u.length?r.resolve({}):r.resolve(JSON.parse(u))}catch(t){r.reject("Malformed JSON in response")}else if(503===l){var d,p=i.defer();d={detail:{defer:p}},document.dispatchEvent(new CustomEvent("act-init-am",d)),p.promise.then(function(){var r=i.defer();return o.POST(t,e,function(t,e){if(t)r.reject(t);else{var n=e[0],a=e[1];if(200===n||202===n)try{var i=e[2];0===i.length?r.resolve({}):r.resolve(JSON.parse(i))}catch(t){r.reject("Malformed JSON in response")}else r.reject(a)}},!1,n),r.promise}).then(function(t){r.resolve(t)}).catch(function(t){r.reject("Failed to initialize access manager: "+t)})}else r.reject(c)}},null,n),r.promise}var i=t("../utils/promise"),o=t("../utils/network");e.exports={get:function(t){var e=i.defer();return o.GET(t,function(t,n){if(t)e.reject(t);else if(200===n[0])try{e.resolve(JSON.parse(n[2]))}catch(t){e.reject("Malformed JSON in response")}else e.reject(n[1])},window.__http__timeout),e.promise},upload:function(t,e,n){var r=i.defer();return o.UPLOAD(t,e,function(t,e){t?r.reject(t):200===e[0]?r.resolve(e[0]):r.reject(e[1])},n),r.promise},hwRead:function(t,e,n,i,o,s){return a((o?"http://"+o+"/":"/")+"hw/read",r({type:e,offset:n,size:i}),s).then(function(e){if(t){var n;return n={detail:{command:t,bytes:e.bytes}},document.dispatchEvent(new CustomEvent("act-hw-value-changed",n)),Promise.resolve()}return Promise.resolve(e.bytes)})},hwPoll:function(t){var e,n=[];for(var i in t)t.hasOwnProperty(i)&&(e=t[i],n.push(i,e.type,e.offset,e.size));return 0===n.length?Promise.resolve():a("/hw/poll",r({data:n}),window.__http__timeout).then(function(t){var e;for(var n in t)if(t.hasOwnProperty(n)){if(e=t[n],"string"!=typeof n||!Array.isArray(e))return Promise.reject("Bad response for poll request");var r;r={detail:{command:n,bytes:e}},document.dispatchEvent(new CustomEvent("act-hw-value-changed",r))}return Promise.resolve()})},hwWrite:function(t,e,n,i,o){return a("/hw/write",r({type:e,offset:n,data:i,mask:o}),window.__http__timeout).then(function(e){if(t){var n;return n={detail:{command:t,bytes:e.bytes}},document.dispatchEvent(new CustomEvent("act-hw-value-changed",n)),Promise.resolve()}return Promise.resolve(e.bytes)})},apiGet:function(t,e,n){return a("/fw/get",r({sec:t,cmd:e}),window.__http__timeout).then(function(r){if(n)return Promise.resolve(r.val);var a;return a={detail:{section:t,command:e,value:r.val}},document.dispatchEvent(new CustomEvent("act-api-value-changed",a)),Promise.resolve(r.val)})},apiPoll:function(t){var e,n=[];for(var i in t)t.hasOwnProperty(i)&&(e=t[i],n.push(e.section,e.command));return 0===n.length?Promise.resolve():a("/fw/poll",r({data:n}),window.__http__timeout).then(function(t){var e;for(var n in t)if(t.hasOwnProperty(n)){if("number"!=typeof(e=t[n]))return Promise.reject("Bad response for poll request");var r,a=n.split(":");r={detail:{section:parseInt(a[0]),command:parseInt(a[1]),value:e}},document.dispatchEvent(new CustomEvent("act-api-value-changed",r))}return Promise.resolve()})},fwSet:function(t,e,n){return a("/fw/set",r({sec:t,cmd:e,page:n}),window.__http__timeout).then(function(){var r;return r={detail:{section:t,command:e,value:n}},document.dispatchEvent(new CustomEvent("act-api-value-changed",r)),Promise.resolve()})},fwGetPage:function(t,e,n){return a("/fw/get",r({sec:t,cmd:e,page:n}),window.__http__timeout).then(function(t){return Promise.resolve(t.val)})},fwLoadArray:function(t,e,n){return a("/calibration/load",r({page:t,size:e}),window.__http__timeout).then(function(e){var r;return r={detail:{page:t,bytes:e.val}},n||document.dispatchEvent(new CustomEvent("act-calibration-value-changed",r)),Promise.resolve(e.val)})},fwSaveArray:function(t,e){return a("/calibration/save",r({page:t,data:e}),window.__http__timeout)},fwDeleteApi:function(){var t=i.defer();return o.DELETE("/api",function(e){e?t.reject(e):t.resolve()}),t.promise},initAM:function(t,e,n){return a("/am",r({doff:t,boff:e,size:n,init:!0}),6e4)},fileDownload:function(t,e){var n=i.defer();return o.POST("/file/download","",function(t,e){if(t)n.reject(t);else if(200===e[0])try{var r=JSON.parse(e[2]);n.resolve(r.file)}catch(t){n.reject("Malformed JSON in response")}else n.reject(e[1])},{"act-file-section":t,"act-file-command":e}),n.promise},fileUpload:function(t,e,n){var r=i.defer();return o.POST("/file/upload",n,function(t){t?r.reject(t):r.resolve()},{"act-file-section":t,"act-file-command":e}),r.promise}}},{"../utils/network":39,"../utils/promise":40}],36:[function(t,e,n){function r(t,e){return!!(isNaN(t)||isNaN(e)||e%8!=0||e<0)||!!(t>e||t<0)}function a(t,e,n){for(var r=[],a=0;a<n;a+=8)a>e?r.push(0):r.push(t>>a&255);return r}function i(t,e,n,r){for(var a=0,i=0;i<n;i+=8)a|=t[r]<<i,r++;return a=(a&e)>>>0}e.exports={itemToBytes:function(t,e,n){return r(e,n)?null:a(t,e,n)},bytesToItem:function(t,e,n){return r(e,n)||8*t.length!==n?null:i(t,parseInt(Math.pow(2,e))-1,n,0)},bytesToItem2:i,arrayToBytes:function(t,e,n){if(r(e,n))return null;var i=[];return t.forEach(function(t){Array.prototype.push.apply(i,a(t,e,n))}),i},bytesToArray:function(t,e,n){if(r(e,n))return null;for(var a=[],o=t.length,s=parseInt(Math.pow(2,e))-1,l=n>>>3,c=0;c<o;c+=l)a.push(i(t,s,n,c));return a}}},{}],37:[function(t,e,n){var r=t("../common/state");e.exports={save:function(t,e,n){var a=document.createElement("a");a.download=t;var i;i="application/json"===e&&"object"==typeof n?new Blob([r.fancyJSON()?JSON.stringify(n,null,2):JSON.stringify(n)],{type:e}):new Blob([n],{type:e});var o=window.URL.createObjectURL(i);a.href=o,a.style.display="hidden",document.body.appendChild(a),a.click(),window.setTimeout(function(){document.body.removeChild(a),window.URL.revokeObjectURL(o)},6e4)},saveURL:function(t,e){var n=document.createElement("a");n.download=t,n.href=e,n.style.display="none",document.body.appendChild(n),n.click(),window.setTimeout(function(){document.body.removeChild(n),window.URL.revokeObjectURL(e)},6e4)}}},{"../common/state":10}],38:[function(t,e,n){e.exports=document.querySelector.bind(document),e.exports.$=document.querySelectorAll.bind(document)},{}],39:[function(t,e,n){function r(t,e){var n=new XMLHttpRequest;return n.timeout=e||3e5,n.onload=function(){"function"==typeof t&&t(null,[parseInt(this.status),this.statusText,this.responseText])},n.onerror=function(){"function"==typeof t&&t("Network error")},n.ontimeout=function(){"function"==typeof t&&t("Timeout")},n}e.exports={GET:function(t,e,n){var a=r(e,n);a.open("GET",t),a.send()},POST:function(t,e,n,a,i){var o=r(n,i);if(o.open("POST",t),a)for(var s in a)a.hasOwnProperty(s)&&o.setRequestHeader(s,a[s]);o.send(e)},UPLOAD:function(t,e,n,a){var i=r(n);"function"==typeof a&&(i.upload.onprogress=a),i.open("POST",t),i.send(e)},DELETE:function(t,e){var n=r(e);n.open("DELETE",t),n.send()}}},{}],40:[function(t,e,n){e.exports.defer=function(){var t={};return t.promise=new Promise(function(e,n){t.resolve=e,t.reject=n}),t}},{}],41:[function(t,e,n){var r=t("../utils/ajax");e.exports=function(t){t.onmessage=function(e){var n=e.data,a=n.base,i=n.commands,o=new Array(i.length),s=i.filter(function(t){return null!==t}).map(function(e,n){return r.hwRead(null,e.type,e.offset,e.size,a,6e4).then(function(r){o[n]={name:e.name,bytes:r},t.postMessage({progress:n})})});Promise.all(s).then(function(){t.postMessage({done:!0,results:o})}).catch(function(e){t.postMessage({error:e})}).then(function(){close()})}}},{"../utils/ajax":35}]},{},[28]);